import{d as e,j as s}from"./index-nyGu-4kg.js";import{r as t,f as a,a as r,T as l,S as i}from"./ui-DPpDBAq4.js";import{q as n,f as o,w as c,m as d,j as m}from"./firebase-DjIx1_qE.js";import{N as x,L as h}from"./router-Bw3HBEct.js";import"./vendor-d2XN-_nt.js";const p=({onAddToCart:p})=>{const[g,u]=t.useState([]),[b,j]=t.useState(!0),[f,v]=t.useState(null),y=()=>{try{const e=localStorage.getItem("favorites");if(!e)return[];const s=JSON.parse(e);return Array.isArray(s)?s:[]}catch(e){return[]}},N=t.useCallback(async()=>{j(!0),v(null);try{const s=y();if(0===s.length)return u([]),void j(!1);const t=n(o(e,"products"),c(d(),"in",s)),a=(await m(t)).docs.map(e=>({id:e.id,...e.data()}));u(a)}catch(s){v("Failed to load your favorites. Please try again later.")}finally{j(!1)}},[]),w=t.useCallback(e=>{try{const s=y().filter(s=>s!==e);localStorage.setItem("favorites",JSON.stringify(s)),u(s=>s.filter(s=>s.id!==e))}catch(s){}},[]),F=t.useCallback(e=>{p&&p(e)},[p]);return t.useEffect(()=>{N()},[N]),b?s.jsx("div",{className:"min-h-screen bg-gray-50 pt-16",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-16",children:s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-700"})})})}):f?s.jsx("div",{className:"min-h-screen bg-gray-50 pt-16",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-16",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-500 text-5xl mb-4",children:"⚠️"}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Oops!"}),s.jsx("p",{className:"text-gray-600 text-lg mb-8",children:f}),s.jsx("button",{onClick:N,className:"inline-flex items-center px-6 py-3 bg-red-700 text-white font-semibold rounded-lg hover:bg-red-800 transition-colors",children:"Try Again"})]})})}):0===g.length?s.jsx("div",{className:"min-h-screen bg-gray-50 pt-16",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-16",children:s.jsxs("div",{className:"text-center",children:[s.jsx(a,{className:"w-24 h-24 text-gray-300 mx-auto mb-6"}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Your Favorites"}),s.jsx("p",{className:"text-gray-600 text-lg mb-8",children:"You haven't added any items to your favorites yet."}),s.jsxs(x,{to:"/Ecommerce",className:"inline-flex items-center px-6 py-3 bg-red-700 text-white font-semibold rounded-lg hover:bg-red-800 transition-colors",children:[s.jsx(r,{className:"w-5 h-5 mr-2"}),"Start Shopping"]})]})})}):s.jsx("div",{className:"min-h-screen bg-gray-50 pt-16",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Your Favorites"}),s.jsxs("p",{className:"text-gray-600",children:["You have ",g.length," item",1!==g.length?"s":""," in your favorites"]})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6",children:g.map(e=>s.jsxs("div",{className:"bg-white w-full rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group",children:[s.jsxs("div",{className:"relative overflow-hidden",children:[s.jsx(h,{to:`/product/${e.id}`,"aria-label":`View details for ${e.name}`,children:s.jsx("img",{src:e.images&&e.images.length>0?e.images[0]:"https://via.placeholder.com/300x300?text=No+Image",alt:e.name,className:"w-full h-40 sm:h-48 object-cover group-hover:scale-105 transition-transform duration-300"})}),s.jsx("button",{onClick:()=>w(e.id),className:"absolute top-3 right-3 p-2 rounded-full bg-red-100 text-red-600 hover:bg-red-200 transition-all duration-300 opacity-100 group-hover:opacity-100","aria-label":`Remove ${e.name} from favorites`,children:s.jsx(l,{className:"w-4 h-4"})}),parseFloat(e.price)>parseFloat(e.newprice||e.newPrice)&&s.jsxs("div",{className:"absolute top-3 left-3 bg-red-500 text-white px-2 py-1 rounded-lg text-xs font-semibold",children:[Math.round(100*(1-parseFloat(e.newprice||e.newPrice)/parseFloat(e.price))),"% OFF"]}),s.jsx("div",{className:"absolute bottom-3 left-3 bg-pink-100 text-pink-600 p-1 rounded-full",children:s.jsx(r,{className:"w-4 h-4 fill-current"})})]}),s.jsxs("div",{className:"p-3 sm:p-4",children:[s.jsx("h3",{className:"font-semibold text-sm sm:text-lg text-gray-900 mb-1 truncate",children:e.name}),s.jsx("div",{className:"mb-3",children:s.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs font-medium capitalize",children:e.category})}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"line-through text-sm sm:text-base text-red-400",children:["$",parseFloat(e.price).toFixed(2)]}),s.jsxs("span",{className:"text-base sm:text-lg font-bold text-gray-900",children:["$",parseFloat(e.newprice||e.newPrice).toFixed(2)]})]}),s.jsxs("button",{onClick:()=>F(e),className:"bg-red-700 text-white px-3 py-1 sm:px-4 sm:py-2 rounded-lg hover:bg-red-800 transition-colors flex items-center space-x-1 sm:space-x-2",children:[s.jsx(i,{className:"w-4 h-4 sm:w-5 sm:h-5"}),s.jsx("span",{className:"text-xs sm:text-sm",children:"Add"})]})]})]})]},e.id))}),s.jsx("div",{className:"mt-12 text-center",children:s.jsx(x,{to:"/Ecommerce",className:"inline-flex mb-8 items-center px-6 py-3 bg-gray-100 text-gray-700 font-semibold rounded-lg hover:bg-gray-200 transition-colors",children:"Continue Shopping"})})]})})};export{p as default};
