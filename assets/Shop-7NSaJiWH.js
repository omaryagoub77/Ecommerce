const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./HeroSlider-nCx5qaJz.js","./index-CmWDTdfw.js","./ui-JvLBDIZS.js","./vendor-d2XN-_nt.js","./firebase-B8p-dfjM.js","./router-z7kgPuEy.js","./index-fvp6kInQ.css","./utils-DPtd6p0S.js","./HeroSlider-D93dPRfE.css"])))=>i.map(i=>d[i]);
import{j as e,_ as s,d as t}from"./index-CmWDTdfw.js";import{R as a,r}from"./ui-JvLBDIZS.js";import{r as l}from"./utils-DPtd6p0S.js";import{f as o,h as i,q as n,w as d,j as c,l as m}from"./firebase-B8p-dfjM.js";import{L as x}from"./router-z7kgPuEy.js";import"./vendor-d2XN-_nt.js";var h=l();const u=(e,s=80)=>e&&e.includes("firebasestorage.googleapis.com")?`${e}?alt=media&q=${s}`:e,p=r.lazy(()=>s(()=>import("./HeroSlider-nCx5qaJz.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),g=r.lazy(()=>s(()=>import("./ui-JvLBDIZS.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.ShoppingCart}))),f=r.lazy(()=>s(()=>import("./ui-JvLBDIZS.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.WifiOff}))),y=r.lazy(()=>s(()=>import("./ui-JvLBDIZS.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.Heart}))),b=r.lazy(()=>s(()=>import("./ui-JvLBDIZS.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.Search}))),j=r.lazy(()=>s(()=>import("./ui-JvLBDIZS.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.X}))),w=r.lazy(()=>s(()=>import("./ui-JvLBDIZS.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.Grid}))),v=r.lazy(()=>s(()=>import("./ui-JvLBDIZS.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.List}))),N=r.lazy(()=>s(()=>import("./ui-JvLBDIZS.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.ChevronLeft}))),_=r.lazy(()=>s(()=>import("./ui-JvLBDIZS.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.ChevronRight})));class A extends a.Component{state={hasError:!1};static getDerivedStateFromError(e){return{hasError:!0}}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-red-100",children:e.jsxs("div",{className:"text-center p-6 bg-white rounded-2xl shadow-xl max-w-md mx-auto",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(f,{className:"w-6 h-6 sm:w-8 sm:h-8 text-red-600"})}),e.jsx("h2",{className:"text-xl font-bold text-red-600 mb-3",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We're experiencing technical difficulties. Please try again later."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Refresh Page"})]})}):this.props.children}}const E={loading:!1,searchQuery:"",favoriteState:[],viewMode:"grid",showAllMen:!1,showAllWomen:!1,showAllKids:!1};function S(e,s){switch(s.type){case"SET_LOADING":return{...e,loading:s.payload};case"SET_SEARCH_QUERY":return{...e,searchQuery:s.payload};case"SET_FAVORITE_STATE":return{...e,favoriteState:Array.isArray(s.payload)?s.payload:[]};case"SET_VIEW_MODE":return{...e,viewMode:s.payload};case"TOGGLE_SHOW_ALL_MEN":return{...e,showAllMen:!e.showAllMen};case"TOGGLE_SHOW_ALL_WOMEN":return{...e,showAllWomen:!e.showAllWomen};case"TOGGLE_SHOW_ALL_KIDS":return{...e,showAllKids:!e.showAllKids};case"RESET_SHOW_ALL":return{...e,showAllMen:!1,showAllWomen:!1,showAllKids:!1};default:return e}}const T=a.memo(({product:s,onAddToCart:t,onAddToFavorites:a,isFav:l})=>{const[o,i]=r.useState(!1),[n,d]=r.useState(!1),c=parseFloat(s.price),m=parseFloat(s.newPrice),p=s.images&&s.images.length>0?s.images[0]:null;return e.jsxs("div",{className:"group bg-white rounded-lg shadow-sm overflow-hidden transition-all duration-300 hover:shadow-md border border-gray-100 flex flex-col h-full w-40 sm:w-48 md:w-56 flex-shrink-0",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gray-100 aspect-[1/1]",children:[e.jsx(x,{to:`/product/${s.id}`,"aria-label":`View details for ${s.name}`,children:p?e.jsx(h.LazyLoadImage,{src:u(p,75),alt:s.name,effect:"",className:"w-full h-full object-cover transition-opacity duration-200 "+(o?"opacity-100":"opacity-0"),onLoad:()=>i(!0),onError:()=>d(!0),placeholderSrc:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjRkNGQ0ZDIi8+Cjwvc3ZnPgo="}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200",children:e.jsx("div",{className:"w-16 h-16 bg-gray-300 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-gray-500 text-xs",children:"No Image"})})})}),!o&&!n&&p&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-200 animate-pulse",children:e.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full"})}),n&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-100 p-2",children:[e.jsx(f,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-400 mb-1"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Image unavailable"})]}),e.jsx("div",{className:"absolute top-2 right-2 flex flex-col space-y-2 z-10",children:e.jsx("button",{onClick:()=>a(s.id),"aria-label":l?"Remove from favorites":"Add to favorites",className:"p-1 sm:p-1.5 max-[450px]:p-1 rounded-full backdrop-blur-sm transition-all duration-300 shadow-sm "+(l?"bg-pink-100 text-pink-600":"bg-white/80 text-gray-600 hover:bg-pink-50 hover:text-pink-600"),children:e.jsx(y,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 max-[450px]:w-3 max-[450px]:h-3 transition-all duration-200 "+(l?"fill-current":"")})})})]}),e.jsxs("div",{className:"p-2 flex flex-col flex-grow",children:[e.jsx("div",{className:"flex justify-between items-start mb-1",children:e.jsx("h3",{className:"font-bold text-sm sm:text-base text-gray-900 line-clamp-1",children:s.name})}),e.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[c>m&&e.jsxs("span",{className:"line-through text-xs text-gray-500",children:["$",c.toFixed(2)]}),e.jsxs("span",{className:"text-sm sm:text-base font-bold text-red-700",children:["$",m.toFixed(2)]}),c>m&&e.jsxs("div",{className:"\n                  line-through\n                  bg-pink-100 text-pink-600 \n                  px-2 py-1 \n                  rounded-full \n                  text-xs font-bold \n\n                  sm:px-1.5 sm:py-0.5 sm:text-[11px] \n                  max-[500px]:px-1 max-[500px]:py-0.5 max-[500px]:text-[10px] \n                  max-[400px]:px-0.5 max-[400px]:py-0.5 max-[400px]:text-[9px]\n                ",children:[Math.round((c-m)/c*100),"%"]})]}),e.jsx("button",{onClick:()=>t(s),className:"p-1 sm:p-1.5 max-[450px]:p-1 bg-red-700 text-white rounded-lg hover:bg-red-800 transition-colors shadow-sm","aria-label":`Add ${s.name} to cart`,children:e.jsx(g,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 max-[450px]:w-3 max-[450px]:h-3"})})]})]})]})},(e,s)=>e.product.id===s.product.id&&e.isFav===s.isFav),C=()=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden animate-pulse border border-gray-100 flex flex-col h-full w-40 sm:w-48 md:w-56 flex-shrink-0",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gray-200 aspect-[1/1]",children:[e.jsx("div",{className:"absolute top-2 left-2 bg-gray-300 rounded-full px-1 py-0.5 sm:px-1.5 sm:py-0.5 max-[450px]:px-1 max-[450px]:py-0.5 w-12 h-4 max-[450px]:w-10 max-[450px]:h-3"}),e.jsxs("div",{className:"absolute top-2 right-2 flex flex-col space-y-2 z-10",children:[e.jsx("div",{className:"p-1 sm:p-1.5 max-[450px]:p-1 rounded-full bg-gray-300 w-6 h-6 sm:w-7 sm:h-7 max-[450px]:w-5 max-[450px]:h-5"}),e.jsx("div",{className:"p-1 sm:p-1.5 max-[450px]:p-1 rounded-full bg-gray-300 w-6 h-6 sm:w-7 sm:h-7 max-[450px]:w-5 max-[450px]:h-5"})]})]}),e.jsxs("div",{className:"p-2 flex flex-col flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded w-2/3"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded-full w-12"})]}),e.jsx("div",{className:"h-3 bg-gray-300 rounded w-full mb-1"}),e.jsx("div",{className:"h-3 bg-gray-300 rounded w-5/6 mb-2"}),e.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"h-3 bg-gray-300 rounded w-8"}),e.jsx("div",{className:"h-5 bg-gray-300 rounded w-14"})]}),e.jsx("div",{className:"p-1 sm:p-1.5 max-[450px]:p-1 bg-gray-300 rounded-lg w-6 h-6 sm:w-7 sm:h-7 max-[450px]:w-5 max-[450px]:h-5"})]})]})]}),I=a.memo(({title:s,count:t,products:a,onAddToCart:l,onAddToFavorites:o,isFav:i,categoryRoute:n,loading:d=!1})=>{const c=r.useRef(null),m=e=>{if(c.current){const s=.8*c.current.offsetWidth;c.current.scrollBy({left:"left"===e?-s:s,behavior:"smooth"})}};return e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:s}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"bg-red-100 text-red-800 text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",children:[t," ",1===t?"item":"items"]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>m("left"),className:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors","aria-label":"Scroll left",children:e.jsx(N,{className:"w-4 h-4 text-gray-700"})}),e.jsx("button",{onClick:()=>m("right"),className:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors","aria-label":"Scroll right",children:e.jsx(_,{className:"w-4 h-4 text-gray-700"})})]})]})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{ref:c,className:"flex overflow-x-auto overflow-y-hidden gap-3 sm:gap-4 pb-4 scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:d?Array.from({length:4}).map((s,t)=>e.jsx(C,{},t)):a?.map(s=>e.jsx(T,{product:s,onAddToCart:l,onAddToFavorites:o,isFav:i(s.id)},s.id))||[]})}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(x,{to:n,className:"text-red-400 hover:text-red-500 transition-all duration-300 hover:drop-shadow-lg font-medium inline-block",children:["View All ",s]})})]})}),L=a.memo(({searchQuery:s,setSearchQuery:t,filteredCount:a})=>{const l=r.useCallback((()=>{let e;return function(...s){clearTimeout(e),e=setTimeout(()=>{clearTimeout(e),(e=>{t(e)})(...s)},300)}})(),[t]);return e.jsx("div",{className:"w-full mb-10 mx-auto px-4",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(b,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search products...",defaultValue:s,onChange:e=>l(e.target.value),className:"w-full pl-9 pr-9 py-3 border border-gray-300 rounded-xl bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-red-600 transition-all duration-300 text-sm","aria-label":"Search products"}),s&&e.jsx("button",{onClick:()=>t(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Clear search",children:e.jsx(j,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 hover:text-gray-600"})})]}),""!==s.trim()&&e.jsxs("div",{className:"mt-2 text-center",children:[e.jsxs("p",{className:"text-gray-700 text-sm",children:["Searching for ",e.jsxs("span",{className:"font-semibold text-red-700",children:['"',s,'"']})]}),e.jsxs("p",{className:"text-gray-600 text-xs",children:["Found ",e.jsx("span",{className:"font-bold",children:a})," result",1!==a?"s":""]})]})]})})}),R=a.memo(({categories:s})=>e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Shop by Category"}),e.jsx("p",{className:"text-gray-600 text-sm max-w-2xl mx-auto",children:"Browse our collections and find the perfect items for you"})]}),e.jsx("div",{className:"flex justify-center gap-4 sm:gap-8 md:gap-16",children:s?.map(s=>e.jsxs("div",{className:"flex flex-col items-center group",children:[e.jsxs("button",{onClick:()=>{const e=document.getElementById(`${s.name}-section`);e?.scrollIntoView({behavior:"smooth"})},className:"relative w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 rounded-full overflow-hidden transition-all duration-300 group-hover:shadow-xl group-hover:-translate-y-1 border-4 border-white shadow-lg","aria-label":`View ${s.name} products`,children:[e.jsx(h.LazyLoadImage,{src:s.imageUrl||(s.name?`/images/categories/${s.name}.jpg`:"/placeholder.jpg"),alt:`${s.name} category`,effect:"blur",width:96,height:96,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsx("span",{className:"mt-2 text-sm sm:text-base font-medium text-gray-800 capitalize group-hover:text-red-700 transition-colors",children:s.name})]},s.id))||[]})]})),O=a.memo(({onAddToCart:s,onAddToFavorites:a,favorites:l=[]})=>{const[x,h]=r.useReducer(S,E),{loading:u,searchQuery:g,favoriteState:y,viewMode:b,showAllMen:j,showAllWomen:N,showAllKids:_}=x,[T,C]=r.useState([]),[O,k]=r.useState([]),[D,M]=r.useState(!0),[P,V]=r.useState(null),W=r.useRef(y);r.useEffect(()=>{W.current=y},[y]),r.useEffect(()=>{const e=(()=>{try{const e=localStorage.getItem("favorites");if(!e)return[];const s=JSON.parse(e);return Array.isArray(s)?s:[]}catch(P){return[]}})();h({type:"SET_FAVORITE_STATE",payload:e})},[]),r.useEffect(()=>{(async()=>{M(!0),V(null);try{const e=await(async()=>{try{const e=o(t,"categories");return(await i(e)).docs.map(e=>({id:e.id,...e.data()}))}catch(P){throw P}})();k(e);const s=e.map(async e=>{const s=await(async(e={})=>{try{let s=o(t,"products");e.category&&(s=n(s,d("category","==",e.category))),e.searchQuery&&(s=n(s,d("name",">=",e.searchQuery),d("name","<=",e.searchQuery+"\\uf8ff"))),s=e.lastVisible?n(s,c(e.lastVisible),m(e.pageSize||100)):n(s,m(e.pageSize||100));const a=await i(s);return{products:a.docs.map(e=>({id:e.id,...e.data()})),lastVisible:a.docs[a.docs.length-1],hasMore:a.docs.length===(e.pageSize||100)}}catch(P){throw P}})({category:e.name,pageSize:100});return{category:e.name,products:s.products}}),a=(await Promise.all(s)).flatMap(e=>e.products);C(a)}catch(e){V("Failed to load products. Please try again later.")}finally{M(!1)}})()},[]),r.useEffect(()=>{""!==g.trim()&&h({type:"RESET_SHOW_ALL"})},[g]);const z=r.useCallback(e=>{const s=Array.isArray(W.current)?[...W.current]:"object"==typeof W.current&&null!==W.current?Object.values(W.current):[];let t;if(t=s.includes(e)?s.filter(s=>s!==e):[...s,e],(e=>{try{const s=Array.isArray(e)?e:[];localStorage.setItem("favorites",JSON.stringify(s))}catch(P){}})(t),h({type:"SET_FAVORITE_STATE",payload:t}),a){const s=T.find(s=>s.id===e);s&&a(s)}},[a,T]),F=Array.isArray(y)?y:"object"==typeof y&&null!==y?Object.values(y):[],H=r.useCallback(e=>F.includes(e),[F]),Q=r.useCallback(e=>{const s=T.filter(s=>s.category===e);return""!==g.trim()?s.filter(e=>e.name.toLowerCase().includes(g.toLowerCase())):s},[T,g]),$=""!==g.trim()?T.filter(e=>e.name.toLowerCase().includes(g.toLowerCase())).length:T.length;return D?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin h-12 w-12 border-t-2 border-b-2 border-red-700 rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700",children:"Loading products..."})]})}):P?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-6 bg-white rounded-2xl shadow-xl",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(f,{className:"w-6 h-6 sm:w-8 sm:h-8 text-red-600"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-3",children:"Error"}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:P}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Refresh Page"})]})}):0===T.length?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-6 bg-white rounded-2xl shadow-xl",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(f,{className:"w-6 h-6 sm:w-8 sm:h-8 text-red-600"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-3",children:"No Products Available"}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:"We couldn't find any products at the moment. Please check back later."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Refresh Page"})]})}):e.jsx(A,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"h-64 bg-gray-200 animate-pulse"}),children:e.jsx(p,{})}),e.jsx(R,{categories:O}),e.jsx(L,{searchQuery:g,setSearchQuery:e=>h({type:"SET_SEARCH_QUERY",payload:e}),filteredCount:$}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 mb-4 hidden",children:e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:[e.jsx("button",{type:"button",onClick:()=>h({type:"SET_VIEW_MODE",payload:"grid"}),className:"px-3 py-2 text-sm font-medium rounded-l-lg "+("grid"===b?"bg-red-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"),children:e.jsx(w,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),e.jsx("button",{type:"button",onClick:()=>h({type:"SET_VIEW_MODE",payload:"list"}),className:"px-3 py-2 text-sm font-medium rounded-r-md "+("list"===b?"bg-red-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"),children:e.jsx(v,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:O?.map(t=>{const a=Q(t.name);return a.length>0?e.jsx("div",{id:`${t.name}-section`,children:e.jsx(I,{title:`${t.name}'s Collection`,count:a.length,products:a,onAddToCart:s,onAddToFavorites:z,isFav:H,categoryRoute:`/${t.name}`,loading:D})},t.id):null})||[]})]})})});export{O as default};
