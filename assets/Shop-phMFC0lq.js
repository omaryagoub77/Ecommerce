const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./HeroSlider-B-eGKll6.js","./index-CoGLwxKM.js","./ui-BofGupZH.js","./vendor-d2XN-_nt.js","./firebase-DjIx1_qE.js","./router-3WOkZ2eX.js","./index-BUBzCVmR.css","./utils-9perhoPs.js","./HeroSlider-D93dPRfE.css"])))=>i.map(i=>d[i]);
import{d as e,j as t,_ as s}from"./index-CoGLwxKM.js";import{R as a,r}from"./ui-BofGupZH.js";import{b as l}from"./blur-6Yatoe7V.js";import{f as i,q as o,w as n,h as c,l as d,j as m,k as h}from"./firebase-DjIx1_qE.js";import{L as x}from"./router-3WOkZ2eX.js";import"./vendor-d2XN-_nt.js";import"./utils-9perhoPs.js";const u=new class{constructor(){this.cache=new Map,this.timers=new Map}set(e,t,s=3e5){this.timers.has(e)&&clearTimeout(this.timers.get(e)),this.cache.set(e,{value:t,timestamp:Date.now()});const a=setTimeout(()=>{this.delete(e)},s);this.timers.set(e,a)}get(e){const t=this.cache.get(e);return t?t.value:null}has(e){return this.cache.has(e)}delete(e){this.timers.has(e)&&(clearTimeout(this.timers.get(e)),this.timers.delete(e)),this.cache.delete(e)}clear(){this.timers.forEach(e=>clearTimeout(e)),this.timers.clear(),this.cache.clear()}size(){return this.cache.size}},p=new class{constructor(){this.cache=u}generateCacheKey(e,t={}){return`${e}:${Object.entries(t).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>`${e}:${t}`).join("|")}`}async fetchProducts(t={}){const s=this.generateCacheKey("products",t);if(this.cache.has(s))return this.cache.get(s);try{let a=i(e,"products");t.category&&(a=o(a,n("category","==",t.category))),t.searchQuery&&(a=o(a,n("name",">=",t.searchQuery),n("name","<=",t.searchQuery+"\\uf8ff"))),a=t.lastVisible?o(a,c(t.lastVisible),d(t.pageSize||12)):o(a,d(t.pageSize||12));const r=await m(a),l={products:r.docs.map(e=>({id:e.id,...e.data()})),lastVisible:r.docs[r.docs.length-1],hasMore:r.docs.length===(t.pageSize||12)};return this.cache.set(s,l,12e4),l}catch(a){throw a}}async fetchHeroSlides(){const t="heroes:all";if(this.cache.has(t))return this.cache.get(t);try{const s=o(i(e,"heroes"),h("createdAt","desc")),a=(await m(s)).docs.map(e=>({id:e.id,...e.data()}));return this.cache.set(t,a,6e5),a}catch(s){throw s}}async preloadNextPage(e){if(!e.lastVisible)return;const t={...e,lastVisible:e.lastVisible};setTimeout(()=>{this.fetchProducts(t).catch(console.error)},1e3)}clearCache(){this.cache.clear()}getCacheStats(){return{size:this.cache.size(),entries:Array.from(this.cache.cache.keys())}}},w=(e,t=80)=>e&&e.includes("firebasestorage.googleapis.com")?`${e}?alt=media&q=${t}`:e,g=new class{constructor(){this.cache=new Set,this.loading=new Map}preload(e){if(this.cache.has(e)||this.loading.has(e))return this.loading.get(e)||Promise.resolve();const t=new Promise((t,s)=>{const a=new Image;a.onload=()=>{this.cache.add(e),this.loading.delete(e),t(a)},a.onerror=t=>{this.loading.delete(e),s(t)},a.src=e});return this.loading.set(e,t),t}preloadMultiple(e){return Promise.allSettled(e.map(e=>this.preload(e)))}preloadWithPriority(e,t=3){return new Promise(s=>{const a=[];let r=0,l=0;const i=()=>{if(l>=e.length)return void(r===e.length&&s(a));const t=e[l++];this.preload(t).then(e=>{a.push({status:"fulfilled",value:e})}).catch(e=>{a.push({status:"rejected",reason:e})}).finally(()=>{r++,i()})};for(let o=0;o<Math.min(t,e.length);o++)i()})}isCached(e){return this.cache.has(e)}clearCache(){this.cache.clear(),this.loading.clear()}getCacheSize(){return this.cache.size}},D={women:{webp:"data:image/webp;base64,UklGRkIBAABXRUJQVlA4IDYBAADwBQCdASoAQABAAP7+/P//////kgAiCWlu/KVH8dxlz9WAF0mwN+5DP0cPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPAAA=",fallback:"/images/women-optimized.webp",placeholder:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTYiIGhlaWdodD0iOTYiIHZpZXdCb3g9IjAgMCA5NiA5NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9Ijk2IiBoZWlnaHQ9Ijk2IiBmaWxsPSIjZjNmNGY2Ii8+Cjx0ZXh0IHg9IjQ4IiB5PSI1NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSIjOWNhM2FmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5Xb21lbjwvdGV4dD4KPC9zdmc+"},men:{webp:"data:image/webp;base64,UklGRkIBAABXRUJQVlA4IDYBAADwBQCdASoAQABAAP7+/P//////kgAiCWlu/KVH8dxlz9WAF0mwN+5DP0cPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPAAA=",fallback:"/images/men-optimized.webp",placeholder:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTYiIGhlaWdodD0iOTYiIHZpZXdCb3g9IjAgMCA5NiA5NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9Ijk2IiBoZWlnaHQ9Ijk2IiBmaWxsPSIjZjNmNGY2Ii8+Cjx0ZXh0IHg9IjQ4IiB5PSI1NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSIjOWNhM2FmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5NZW48L3RleHQ+Cjwvc3ZnPg=="},kids:{webp:"data:image/webp;base64,UklGRkIBAABXRUJQVlA4IDYBAADwBQCdASoAQABAAP7+/P//////kgAiCWlu/KVH8dxlz9WAF0mwN+5DP0cPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPQw9DD0MPAAA=",fallback:"/images/kids-optimized.webp",placeholder:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTYiIGhlaWdodD0iOTYiIHZpZXdCb3g9IjAgMCA5NiA5NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9Ijk2IiBoZWlnaHQ9Ijk2IiBmaWxsPSIjZjNmNGY2Ii8+Cjx0ZXh0IHg9IjQ4IiB5PSI1NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSIjOWNhM2FmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5LaWRzPC90ZXh0Pgo8L3N2Zz4="}},f=(e,t={})=>{const{preferWebP:s=!0,width:a=96,height:r=96,quality:l=80}=t,i=D[e];return i?(()=>{try{return document.createElement("canvas").toDataURL("image/webp").indexOf("webp")>-1}catch{return!1}})()&&s?i.webp:i.fallback||i.placeholder:i.placeholder},y=r.lazy(()=>s(()=>import("./HeroSlider-B-eGKll6.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),b=r.lazy(()=>s(()=>import("./ui-BofGupZH.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.ShoppingCart}))),j=r.lazy(()=>s(()=>import("./ui-BofGupZH.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.WifiOff}))),P=r.lazy(()=>s(()=>import("./ui-BofGupZH.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.Heart}))),v=r.lazy(()=>s(()=>import("./ui-BofGupZH.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.Search}))),N=r.lazy(()=>s(()=>import("./ui-BofGupZH.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.X}))),M=r.lazy(()=>s(()=>import("./ui-BofGupZH.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.Grid}))),A=r.lazy(()=>s(()=>import("./ui-BofGupZH.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.List}))),I=r.lazy(()=>s(()=>import("./ui-BofGupZH.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.ChevronLeft}))),Q=r.lazy(()=>s(()=>import("./ui-BofGupZH.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.ChevronRight})));class S extends a.Component{state={hasError:!1};static getDerivedStateFromError(e){return{hasError:!0}}render(){return this.state.hasError?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-red-100",children:t.jsxs("div",{className:"text-center p-6 bg-white rounded-2xl shadow-xl max-w-md mx-auto",children:[t.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(j,{className:"w-6 h-6 sm:w-8 sm:h-8 text-red-600"})}),t.jsx("h2",{className:"text-xl font-bold text-red-600 mb-3",children:"Something went wrong"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"We're experiencing technical difficulties. Please try again later."}),t.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Refresh Page"})]})}):this.props.children}}const _={products:[],loading:!1,searchQuery:"",favoriteState:[],lastVisible:null,hasMore:!0,page:1,viewMode:"grid",showAllMen:!1,showAllWomen:!1,showAllKids:!1};function E(e,t){switch(t.type){case"SET_PRODUCTS":return{...e,products:t.payload};case"SET_LOADING":return{...e,loading:t.payload};case"SET_SEARCH_QUERY":return{...e,searchQuery:t.payload};case"SET_FAVORITE_STATE":return{...e,favoriteState:Array.isArray(t.payload)?t.payload:[]};case"SET_LAST_VISIBLE":return{...e,lastVisible:t.payload};case"SET_HAS_MORE":return{...e,hasMore:t.payload};case"SET_PAGE":return{...e,page:t.payload};case"SET_VIEW_MODE":return{...e,viewMode:t.payload};case"RESET_PAGINATION":return{...e,page:1,lastVisible:null,hasMore:!0,products:[]};case"TOGGLE_SHOW_ALL_MEN":return{...e,showAllMen:!e.showAllMen};case"TOGGLE_SHOW_ALL_WOMEN":return{...e,showAllWomen:!e.showAllWomen};case"TOGGLE_SHOW_ALL_KIDS":return{...e,showAllKids:!e.showAllKids};case"RESET_SHOW_ALL":return{...e,showAllMen:!1,showAllWomen:!1,showAllKids:!1};default:return e}}const C=a.memo(({product:e,onAddToCart:s,onAddToFavorites:a,isFav:i})=>{const[o,n]=r.useState(!1),[c,d]=r.useState(!1),m=parseFloat(e.price),h=parseFloat(e.newPrice),u=e.images&&e.images.length>0?e.images[0]:null;return t.jsxs("div",{className:"group bg-white rounded-lg shadow-sm overflow-hidden transition-all duration-300 hover:shadow-md border border-gray-100 flex flex-col h-full w-40 sm:w-48 md:w-56 flex-shrink-0",children:[t.jsxs("div",{className:"relative overflow-hidden bg-gray-100 aspect-[1/1]",children:[t.jsx(x,{to:`/product/${e.id}`,"aria-label":`View details for ${e.name}`,children:u?t.jsx(l.LazyLoadImage,{src:w(u,75),alt:e.name,effect:"",className:"w-full h-full object-cover transition-opacity duration-200 "+(o?"opacity-100":"opacity-0"),onLoad:()=>n(!0),onError:()=>d(!0),placeholderSrc:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjRkNGQ0ZDIi8+Cjwvc3ZnPgo="}):t.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200",children:t.jsx("div",{className:"w-16 h-16 bg-gray-300 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-gray-500 text-xs",children:"No Image"})})})}),!o&&!c&&u&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-200 animate-pulse",children:t.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full"})}),c&&t.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-100 p-2",children:[t.jsx(j,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-400 mb-1"}),t.jsx("p",{className:"text-gray-500 text-xs",children:"Image unavailable"})]}),t.jsx("div",{className:"absolute top-2 right-2 flex flex-col space-y-2 z-10",children:t.jsx("button",{onClick:()=>a(e.id),"aria-label":i?"Remove from favorites":"Add to favorites",className:"p-1 sm:p-1.5 max-[450px]:p-1 rounded-full backdrop-blur-sm transition-all duration-300 shadow-sm "+(i?"bg-pink-100 text-pink-600":"bg-white/80 text-gray-600 hover:bg-pink-50 hover:text-pink-600"),children:t.jsx(P,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 max-[450px]:w-3 max-[450px]:h-3 transition-all duration-200 "+(i?"fill-current":"")})})})]}),t.jsxs("div",{className:"p-2 flex flex-col flex-grow",children:[t.jsx("div",{className:"flex justify-between items-start mb-1",children:t.jsx("h3",{className:"font-bold text-sm sm:text-base text-gray-900 line-clamp-1",children:e.name})}),t.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[m>h&&t.jsxs("span",{className:"line-through text-xs text-gray-500",children:["$",m.toFixed(2)]}),t.jsxs("span",{className:"text-sm sm:text-base font-bold text-red-700",children:["$",h.toFixed(2)]}),m>h&&t.jsxs("div",{className:"\r\n                  line-through\r\n                  bg-pink-100 text-pink-600 \r\n                  px-2 py-1 \r\n                  rounded-full \r\n                  text-xs font-bold \r\n\r\n                  sm:px-1.5 sm:py-0.5 sm:text-[11px] \r\n                  max-[500px]:px-1 max-[500px]:py-0.5 max-[500px]:text-[10px] \r\n                  max-[400px]:px-0.5 max-[400px]:py-0.5 max-[400px]:text-[9px]\r\n                ",children:[Math.round((m-h)/m*100),"%"]})]}),t.jsx("button",{onClick:()=>s(e),className:"p-1 sm:p-1.5 max-[450px]:p-1 bg-red-700 text-white rounded-lg hover:bg-red-800 transition-colors shadow-sm","aria-label":`Add ${e.name} to cart`,children:t.jsx(b,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 max-[450px]:w-3 max-[450px]:h-3"})})]})]})]})},(e,t)=>e.product.id===t.product.id&&e.isFav===t.isFav),T=()=>t.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden animate-pulse border border-gray-100 flex flex-col h-full w-40 sm:w-48 md:w-56 flex-shrink-0",children:[t.jsxs("div",{className:"relative overflow-hidden bg-gray-200 aspect-[1/1]",children:[t.jsx("div",{className:"absolute top-2 left-2 bg-gray-300 rounded-full px-1 py-0.5 sm:px-1.5 sm:py-0.5 max-[450px]:px-1 max-[450px]:py-0.5 w-12 h-4 max-[450px]:w-10 max-[450px]:h-3"}),t.jsxs("div",{className:"absolute top-2 right-2 flex flex-col space-y-2 z-10",children:[t.jsx("div",{className:"p-1 sm:p-1.5 max-[450px]:p-1 rounded-full bg-gray-300 w-6 h-6 sm:w-7 sm:h-7 max-[450px]:w-5 max-[450px]:h-5"}),t.jsx("div",{className:"p-1 sm:p-1.5 max-[450px]:p-1 rounded-full bg-gray-300 w-6 h-6 sm:w-7 sm:h-7 max-[450px]:w-5 max-[450px]:h-5"})]})]}),t.jsxs("div",{className:"p-2 flex flex-col flex-grow",children:[t.jsxs("div",{className:"flex justify-between items-start mb-1",children:[t.jsx("div",{className:"h-4 bg-gray-300 rounded w-2/3"}),t.jsx("div",{className:"h-4 bg-gray-300 rounded-full w-12"})]}),t.jsx("div",{className:"h-3 bg-gray-300 rounded w-full mb-1"}),t.jsx("div",{className:"h-3 bg-gray-300 rounded w-5/6 mb-2"}),t.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("div",{className:"h-3 bg-gray-300 rounded w-8"}),t.jsx("div",{className:"h-5 bg-gray-300 rounded w-14"})]}),t.jsx("div",{className:"p-1 sm:p-1.5 max-[450px]:p-1 bg-gray-300 rounded-lg w-6 h-6 sm:w-7 sm:h-7 max-[450px]:w-5 max-[450px]:h-5"})]})]})]}),k=a.memo(({title:e,count:s,products:a,onAddToCart:l,onAddToFavorites:i,isFav:o,categoryRoute:n,loading:c=!1})=>{const d=r.useRef(null),m=e=>{if(d.current){const t=.8*d.current.offsetWidth;d.current.scrollBy({left:"left"===e?-t:t,behavior:"smooth"})}};return t.jsxs("div",{className:"py-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:e}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("span",{className:"bg-red-100 text-red-800 text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",children:[s," ",1===s?"item":"items"]}),t.jsxs("div",{className:"flex space-x-1",children:[t.jsx("button",{onClick:()=>m("left"),className:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors","aria-label":"Scroll left",children:t.jsx(I,{className:"w-4 h-4 text-gray-700"})}),t.jsx("button",{onClick:()=>m("right"),className:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors","aria-label":"Scroll right",children:t.jsx(Q,{className:"w-4 h-4 text-gray-700"})})]})]})]}),t.jsx("div",{className:"relative",children:t.jsx("div",{ref:d,className:"flex overflow-x-auto overflow-y-hidden gap-3 sm:gap-4 pb-4 scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:c?Array.from({length:4}).map((e,s)=>t.jsx(T,{},s)):a.map(e=>t.jsx(C,{product:e,onAddToCart:l,onAddToFavorites:i,isFav:o(e.id)},e.id))})}),t.jsx("div",{className:"flex justify-center mt-4",children:t.jsxs(x,{to:n,className:"px-6 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all duration-300 shadow-md hover:shadow-lg text-sm font-medium inline-block",children:["View All ",e]})})]})}),W=a.memo(({searchQuery:e,setSearchQuery:s,filteredCount:a})=>{const l=r.useCallback((()=>{let e;return function(...t){clearTimeout(e),e=setTimeout(()=>{clearTimeout(e),(e=>{s(e)})(...t)},300)}})(),[s]);return t.jsx("div",{className:"w-full mb-10 mx-auto px-4",children:t.jsxs("div",{className:"max-w-2xl mx-auto",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(v,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})}),t.jsx("input",{type:"text",placeholder:"Search products...",defaultValue:e,onChange:e=>l(e.target.value),className:"w-full pl-9 pr-9 py-3 border border-gray-300 rounded-xl bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-red-600 transition-all duration-300 text-sm","aria-label":"Search products"}),e&&t.jsx("button",{onClick:()=>s(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Clear search",children:t.jsx(N,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 hover:text-gray-600"})})]}),""!==e.trim()&&t.jsxs("div",{className:"mt-2 text-center",children:[t.jsxs("p",{className:"text-gray-700 text-sm",children:["Searching for ",t.jsxs("span",{className:"font-semibold text-red-700",children:['"',e,'"']})]}),t.jsxs("p",{className:"text-gray-600 text-xs",children:["Found ",t.jsx("span",{className:"font-bold",children:a})," result",1!==a?"s":""]})]})]})})}),L=a.memo(()=>{const e=[{name:"men",img:f("men")},{name:"women",img:f("women")},{name:"kids",img:f("kids")}];return r.useEffect(()=>{Object.values(D).forEach(e=>{if(e.webp){const t=document.createElement("link");t.rel="preload",t.as="image",t.href=e.webp,document.head.appendChild(t)}})},[]),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Shop by Category"}),t.jsx("p",{className:"text-gray-600 text-sm max-w-2xl mx-auto",children:"Browse our collections and find the perfect items for you"})]}),t.jsx("div",{className:"flex justify-center gap-4 sm:gap-8 md:gap-16",children:e.map(e=>t.jsxs("div",{className:"flex flex-col items-center group",children:[t.jsxs("button",{onClick:()=>{const t=document.getElementById(`${e.name}-section`);t?.scrollIntoView({behavior:"smooth"})},className:"relative w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 rounded-full overflow-hidden transition-all duration-300 group-hover:shadow-xl group-hover:-translate-y-1 border-4 border-white shadow-lg","aria-label":`View ${e.name} products`,children:[t.jsx(l.LazyLoadImage,{src:e.img,alt:`${e.name} category`,effect:"blur",width:96,height:96,className:"w-full h-full object-cover",loading:"eager"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),t.jsx("span",{className:"mt-2 text-sm sm:text-base font-medium text-gray-800 capitalize group-hover:text-red-700 transition-colors",children:e.name})]},e.name))})]})}),O=a.memo(({onAddToCart:e,onAddToFavorites:s,favorites:a=[]})=>{const[l,i]=r.useReducer(E,_),{products:o,loading:n,searchQuery:c,favoriteState:d,lastVisible:m,hasMore:h,page:x,viewMode:u,showAllMen:D,showAllWomen:f,showAllKids:b}=l,P=r.useRef(d);r.useEffect(()=>{P.current=d},[d]),r.useEffect(()=>{const e=(()=>{try{const e=localStorage.getItem("favorites");if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return[]}})();i({type:"SET_FAVORITE_STATE",payload:e})},[]);const v=r.useCallback(async(e=1,t=c)=>{1===e&&(i({type:"SET_LOADING",payload:!0}),i({type:"RESET_PAGINATION"}));try{const t={pageSize:12,lastVisible:e>1?m:null},s=await new Promise(e=>{const s=async()=>{const s=await p.fetchProducts(t);e(s)};window.requestIdleCallback?window.requestIdleCallback(s,{timeout:1e3}):setTimeout(s,0)});if(i(1===e?{type:"SET_PRODUCTS",payload:s.products}:{type:"SET_PRODUCTS",payload:[...o,...s.products]}),i({type:"SET_LAST_VISIBLE",payload:s.lastVisible}),i({type:"SET_HAS_MORE",payload:s.hasMore}),i({type:"SET_PAGE",payload:e}),s.products.length>0){const e=s.products.slice(0,4).map(e=>e.images&&e.images[0]).filter(Boolean).map(e=>w(e,40));window.requestIdleCallback&&window.requestIdleCallback(()=>{g.preloadWithPriority(e,2)})}}catch(s){}finally{i({type:"SET_LOADING",payload:!1})}},[m,o]);r.useEffect(()=>{v()},[]),r.useEffect(()=>{""!==c.trim()&&i({type:"RESET_SHOW_ALL"})},[c]);const N=r.useCallback(()=>{!n&&h&&v(x+1)},[n,h,x,v]),I=r.useCallback(e=>{const t=Array.isArray(P.current)?[...P.current]:"object"==typeof P.current&&null!==P.current?Object.values(P.current):[];let a;if(a=t.includes(e)?t.filter(t=>t!==e):[...t,e],(e=>{try{const t=Array.isArray(e)?e:[];localStorage.setItem("favorites",JSON.stringify(t))}catch(t){}})(a),i({type:"SET_FAVORITE_STATE",payload:a}),s){const t=o.find(t=>t.id===e);t&&s(t)}},[s,o]),Q=Array.isArray(d)?d:"object"==typeof d&&null!==d?Object.values(d):[],C=r.useCallback(e=>Q.includes(e),[Q]),O=o.filter(e=>"men"===e.category),R=o.filter(e=>"women"===e.category),Z=o.filter(e=>"kids"===e.category),B=""!==c.trim()?O.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())):O,z=""!==c.trim()?R.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())):R,H=""!==c.trim()?Z.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())):Z,V=(c.trim(),B),F=(c.trim(),z),G=(c.trim(),H),Y=B.length+z.length+H.length;return n&&0===o.length?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Our Products"}),t.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto text-sm",children:"Discover our latest collection of premium products"})]}),t.jsx("div",{className:"flex gap-3 sm:gap-4 md:gap-6 overflow-x-auto pb-4",children:Array.from({length:4}).map((e,s)=>t.jsx(T,{},s))})]})}):0===o.length?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:t.jsxs("div",{className:"text-center max-w-md mx-auto p-6 bg-white rounded-2xl shadow-xl",children:[t.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(j,{className:"w-6 h-6 sm:w-8 sm:h-8 text-red-600"})}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-3",children:"No Products Available"}),t.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:"We couldn't find any products at the moment. Please check back later."}),t.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Refresh Page"})]})}):t.jsx(S,{children:t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[t.jsx(r.Suspense,{fallback:t.jsx("div",{className:"h-64 bg-gray-200 animate-pulse"}),children:t.jsx(y,{})}),t.jsx(L,{}),t.jsx(W,{searchQuery:c,setSearchQuery:e=>i({type:"SET_SEARCH_QUERY",payload:e}),filteredCount:Y}),t.jsx("div",{className:"max-w-7xl mx-auto px-4 mb-4 hidden",children:t.jsxs("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:[t.jsx("button",{type:"button",onClick:()=>i({type:"SET_VIEW_MODE",payload:"grid"}),className:"px-3 py-2 text-sm font-medium rounded-l-lg "+("grid"===u?"bg-red-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"),children:t.jsx(M,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),t.jsx("button",{type:"button",onClick:()=>i({type:"SET_VIEW_MODE",payload:"list"}),className:"px-3 py-2 text-sm font-medium rounded-r-md "+("list"===u?"bg-red-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"),children:t.jsx(A,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[B.length>0&&t.jsx("div",{id:"men-section",children:t.jsx(k,{title:"Men's Collection",count:B.length,products:V,onAddToCart:e,onAddToFavorites:I,isFav:C,categoryRoute:"/men",loading:n&&0===o.length})}),z.length>0&&t.jsx("div",{id:"women-section",children:t.jsx(k,{title:"Women's Collection",count:z.length,products:F,onAddToCart:e,onAddToFavorites:I,isFav:C,categoryRoute:"/women",loading:n&&0===o.length})}),H.length>0&&t.jsx("div",{id:"kids-section",children:t.jsx(k,{title:"Kids' Collection",count:H.length,products:G,onAddToCart:e,onAddToFavorites:I,isFav:C,categoryRoute:"/kids",loading:n&&0===o.length})})]}),h&&t.jsx("div",{className:"flex justify-center my-8",children:t.jsx("button",{onClick:N,disabled:n,className:"px-6 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all duration-300 shadow-md hover:shadow-lg flex items-center disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:n?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):"Load More Products"})})]})})});export{O as default};
