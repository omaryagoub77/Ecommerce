import{j as e,d as s}from"./index-CbVUMqtW.js";import{r as t,A as a,M as l,c as r,H as i}from"./ui-JvLBDIZS.js";import{d as c,b as n}from"./firebase-BxPAW4b_.js";import{b as d,c as o}from"./router-z7kgPuEy.js";import"./vendor-d2XN-_nt.js";const x=e=>{try{const s=Array.isArray(e)?e:[];localStorage.setItem("favorites",JSON.stringify(s))}catch(s){}},m=({onAddToCart:m,onAddToFavorites:h,favorites:g=[]})=>{const{id:b}=d(),u=o(),[f,j]=t.useState(null),[p,N]=t.useState(!0),[v,y]=t.useState(null),[w,k]=t.useState(null),[C,S]=t.useState([]),[P,A]=t.useState(1),[z,T]=t.useState(""),[E,$]=t.useState(!1),[F,I]=t.useState([]);t.useEffect(()=>{const e=(()=>{try{const e=localStorage.getItem("favorites");if(!e)return[];const s=JSON.parse(e);return Array.isArray(s)?s:[]}catch(e){return[]}})();I(e)},[]);const R=F.includes(b);t.useEffect(()=>{(async()=>{N(!0);try{const e=c(s,"products",b),t=await n(e);if(t.exists()){const e={id:t.id,...t.data()};j(e),y(e.images?.[0]||null),e.colors&&e.colors.length>0&&S([e.colors[0]])}else j(null)}catch(e){j(null)}finally{N(!1)}})()},[b]),t.useEffect(()=>{window.scrollTo(0,0)},[b]);const q=f?.sizes&&f.sizes.length>0,B=f?.colors&&f.colors.length>0,D=e=>{S(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},H=()=>{!q||w?B&&0===C.length?T("‚ö†Ô∏è Please select at least one color before adding to cart."):(T("‚úÖ Added to cart!"),m({id:f.id,name:f.name,price:f.newPrice||f.price,image:f.images?.[0]||"",selectedSize:w,selectedColors:C,quantity:P}),setTimeout(()=>T(""),3e3)):T("‚ö†Ô∏è Please select a size before adding to cart.")},J=()=>{const e=[...F],s=f.id;if(R){const t=e.filter(e=>e!==s);x(t),I(t),T("üíî Removed from favorites!")}else{const t=[...e,s];x(t),I(t),h(f),T("‚ù§Ô∏è Added to favorites!")}setTimeout(()=>T(""),3e3)},M=()=>{$(!0)},O=e=>{e<1||A(e)},G=()=>!f||!f.newPrice||f.newPrice>=f.price?0:Math.round((f.price-f.newPrice)/f.price*100);return p?e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-red-600"})}):f?e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsxs("div",{className:"md:hidden",children:[e.jsx("div",{className:"px-4 pt-4 pb-2",children:e.jsx("button",{onClick:()=>u(-1),className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:e.jsx(a,{className:"w-5 h-5 mr-1"})})}),e.jsx("div",{className:"px-4 mb-4",children:e.jsx("div",{className:"w-full aspect-square bg-gray-50 rounded-2xl overflow-hidden flex items-center justify-center",children:v&&!E?e.jsx("img",{src:v,alt:f.name,className:"w-full h-full object-cover",onError:M}):e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"text-5xl mb-2",children:"üñºÔ∏è"}),e.jsx("p",{className:"text-gray-500",children:"Image not available"})]})})}),e.jsx("div",{className:"px-4 mb-4",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:f.images?.slice(0,4).map((s,t)=>e.jsx("button",{onClick:()=>{y(s),$(!1)},className:"flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 transition-all "+(v===s?"border-black":"border-gray-200"),children:e.jsx("img",{src:s,alt:`Thumbnail ${t+1}`,className:"w-full h-full object-cover",onError:e=>{e.target.src="/placeholder.jpg"}})},t))})}),e.jsxs("div",{className:"px-4 pb-6",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:f.name}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"flex text-yellow-400",children:"‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ"}),e.jsx("span",{className:"text-sm text-gray-600",children:"4.5/5"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["$",f.newPrice||f.price]}),f.newPrice&&f.newPrice<f.price&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-lg text-gray-400 line-through",children:["$",f.price]}),e.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-600 text-xs font-semibold rounded-full",children:["-",G(),"%"]})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 break-words leading-relaxed",children:f.shortDescription||f.det?.substring(0,150)+"..."||"No description available."}),B&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Select Colors"}),e.jsx("div",{className:"flex gap-2",children:f.colors.map(s=>e.jsx("button",{onClick:()=>D(s),className:"w-9 h-9 rounded-full border-2 transition-all "+(C.includes(s)?"border-black ring-2 ring-offset-2 ring-black":"border-gray-300"),style:{backgroundColor:s},title:s},s))})]}),q&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Choose Size"}),e.jsx("div",{className:"flex gap-2",children:f.sizes.map(s=>e.jsx("button",{onClick:()=>k(s),className:"px-5 py-2.5 rounded-full text-sm font-medium transition-all "+(w===s?"bg-black text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:s},s))}),q&&!w&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:"Please select a size"})]}),e.jsx("div",{className:"flex items-center gap-4 mb-4",children:e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-full",children:[e.jsx("button",{onClick:()=>O(P-1),className:"p-3 text-gray-600 hover:text-gray-900",disabled:P<=1,children:e.jsx(l,{className:"w-4 h-4"})}),e.jsx("span",{className:"px-4 text-sm font-medium",children:P}),e.jsx("button",{onClick:()=>O(P+1),className:"p-3 text-gray-600 hover:text-gray-900",children:e.jsx(r,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"flex gap-3 mb-3",children:[e.jsx("button",{onClick:H,className:"flex-1 bg-black text-white py-3.5 rounded-full font-medium hover:bg-gray-800 transition-all",children:"Add to Cart"}),e.jsx("button",{onClick:J,className:"p-3.5 rounded-full border transition-all "+(R?"bg-red-50 text-red-600 border-red-200":"bg-gray-50 text-gray-600 border-gray-300 hover:bg-gray-100"),title:R?"Remove from favorites":"Add to favorites",children:e.jsx(i,{className:"w-5 h-5 transition-all "+(R?"fill-red-600 text-red-600":"")})})]}),z&&e.jsx("div",{className:"p-3 bg-green-50 text-green-700 rounded-lg text-sm text-center",children:z})]})]}),e.jsx("div",{className:"hidden md:block",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[e.jsxs("button",{onClick:()=>u(-1),className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors mb-6",children:[e.jsx(a,{className:"w-5 h-5 mr-1"})," Back"]}),e.jsxs("div",{className:"flex gap-8",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex flex-col gap-3",children:f.images?.slice(0,4).map((s,t)=>e.jsx("button",{onClick:()=>{y(s),$(!1)},className:"w-20 h-20 rounded-xl overflow-hidden border-2 transition-all "+(v===s?"border-black":"border-gray-200 hover:border-gray-300"),children:e.jsx("img",{src:s,alt:`Thumbnail ${t+1}`,className:"w-full h-full object-cover",onError:e=>{e.target.src="/placeholder.jpg"}})},t))}),e.jsx("div",{className:"flex-1 bg-gray-50 rounded-2xl overflow-hidden flex items-center justify-center",style:{maxHeight:"500px"},children:v&&!E?e.jsx("img",{src:v,alt:f.name,className:"w-full h-full object-cover",onError:M}):e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"text-5xl mb-2",children:"üñºÔ∏è"}),e.jsx("p",{className:"text-gray-500",children:"Image not available"})]})})]})}),e.jsxs("div",{className:"w-96 flex-shrink-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:f.name}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"flex text-yellow-400 text-lg",children:"‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ"}),e.jsx("span",{className:"text-sm text-gray-600",children:"4.5/5"})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs("span",{className:"text-3xl font-bold text-gray-900",children:["$",f.newPrice||f.price]}),f.newPrice&&f.newPrice<f.price&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-xl text-gray-400 line-through",children:["$",f.price]}),e.jsxs("span",{className:"px-3 py-1 bg-red-100 text-red-600 text-sm font-semibold rounded-full",children:["-",G(),"%"]})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-6 leading-relaxed border-b pb-6",children:f.shortDescription||f.det?.substring(0,150)+"..."||"No description available."}),B&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Select Colors"}),e.jsx("div",{className:"flex gap-3",children:f.colors.map(s=>e.jsx("button",{onClick:()=>D(s),className:"w-10 h-10 rounded-full border-2 transition-all "+(C.includes(s)?"border-black ring-2 ring-offset-2 ring-black":"border-gray-300"),style:{backgroundColor:s},title:s},s))})]}),q&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Choose Size"}),e.jsx("div",{className:"flex gap-2",children:f.sizes.map(s=>e.jsx("button",{onClick:()=>k(s),className:"px-6 py-3 rounded-full text-sm font-medium transition-all "+(w===s?"bg-black text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:s},s))}),q&&!w&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:"Please select a size"})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-full",children:[e.jsx("button",{onClick:()=>O(P-1),className:"p-3 text-gray-600 hover:text-gray-900",disabled:P<=1,children:e.jsx(l,{className:"w-5 h-5"})}),e.jsx("span",{className:"px-6 font-medium",children:P}),e.jsx("button",{onClick:()=>O(P+1),className:"p-3 text-gray-600 hover:text-gray-900",children:e.jsx(r,{className:"w-5 h-5"})})]}),e.jsx("button",{onClick:H,className:"flex-1 bg-black text-white py-3.5 rounded-full font-medium hover:bg-gray-800 transition-all",children:"Add to Cart"}),e.jsx("button",{onClick:J,className:"p-3.5 rounded-full border transition-all "+(R?"bg-red-50 text-red-600 border-red-200":"bg-gray-50 text-gray-600 border-gray-300 hover:bg-gray-100"),title:R?"Remove from favorites":"Add to favorites",children:e.jsx(i,{className:"w-5 h-5 transition-all "+(R?"fill-red-600 text-red-600":"")})})]}),z&&e.jsx("div",{className:"p-3 bg-green-50 text-green-700 rounded-lg text-sm text-center",children:z})]})]})]})})]}):e.jsx("div",{className:"text-center py-20 px-4",children:e.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-xl p-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üòï"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Product Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"This product may have been removed or doesn't exist."}),e.jsxs("button",{onClick:()=>u(-1),className:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(a,{className:"w-4 h-4 mr-2"})," Go Back"]})]})})};export{m as default};
