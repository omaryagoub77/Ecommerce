import{d as e,j as s}from"./index-DCNRoESp.js";import{r as a,h as t,H as r,R as l,T as i,S as d}from"./ui-JvLBDIZS.js";import{q as m,f as o,w as x,k as n,j as c}from"./firebase-BxPAW4b_.js";import{N as h,L as g}from"./router-z7kgPuEy.js";import"./vendor-d2XN-_nt.js";const p=l.memo(({title:e,count:a})=>s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:e}),s.jsxs("span",{className:"bg-red-100 text-red-800 text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",children:[a," ",1===a?"item":"items"]})]})),u=l.memo(({product:e,onAddToCart:a,onRemoveFavorite:t,isFav:r})=>{const l=parseFloat(e.price)||0,m=parseFloat(e.newprice||e.newPrice)||l,o=e.images&&e.images.length>0?e.images[0]:null;return s.jsxs("div",{className:"group bg-white rounded-lg shadow-sm overflow-hidden transition-all duration-300 hover:shadow-md border border-gray-100 flex flex-col h-full",children:[s.jsxs("div",{className:"relative overflow-hidden bg-gray-100 aspect-[1/1]",children:[o?s.jsx(g,{to:`/product/${e.id}`,"aria-label":`View details for ${e.name}`,children:s.jsx("img",{src:o,alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200",children:s.jsx("div",{className:"w-16 h-16 bg-gray-300 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-gray-500 text-xs",children:"No Image"})})}),s.jsx("div",{className:"absolute top-2 right-2 flex flex-col space-y-2 z-10",children:s.jsx("button",{onClick:()=>t(e.id),"aria-label":"Remove from favorites",className:"p-1 sm:p-1.5 max-[450px]:p-1 rounded-full backdrop-blur-sm transition-all duration-300 shadow-sm bg-pink-100 text-pink-600",children:s.jsx(i,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 max-[450px]:w-3 max-[450px]:h-3"})})}),l>m&&s.jsxs("div",{className:"absolute top-2 left-2 bg-red-600 text-white px-1 py-0.5 sm:px-1.5 sm:py-0.5 max-[450px]:px-1 max-[450px]:py-0.5 rounded-full text-xs font-bold shadow-md z-10",children:[Math.round((l-m)/l*100),"% OFF"]})]}),s.jsxs("div",{className:"p-2 flex flex-col flex-grow",children:[s.jsx("div",{className:"flex justify-between items-start mb-1",children:s.jsx("h3",{className:"font-bold text-sm sm:text-base text-gray-900 line-clamp-1",children:e.name})}),s.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[l>m&&s.jsxs("span",{className:"line-through text-xs text-gray-500",children:["$",l.toFixed(2)]}),s.jsxs("span",{className:"text-sm sm:text-base font-bold text-red-700",children:["$",m.toFixed(2)]})]}),s.jsx("button",{onClick:()=>a(e),className:"p-1 sm:p-1.5 max-[450px]:p-1 bg-red-700 text-white rounded-lg hover:bg-red-800 transition-colors shadow-sm","aria-label":`Add ${e.name} to cart`,children:s.jsx(d,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 max-[450px]:w-3 max-[450px]:h-3"})})]})]})]})},(e,s)=>e.product.id===s.product.id&&e.isFav===s.isFav),f=()=>s.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden animate-pulse border border-gray-100 flex flex-col h-full",children:[s.jsxs("div",{className:"relative overflow-hidden bg-gray-200 aspect-[1/1]",children:[s.jsx("div",{className:"absolute top-2 left-2 bg-gray-300 rounded-full px-1 py-0.5 sm:px-1.5 sm:py-0.5 max-[450px]:px-1 max-[450px]:py-0.5 w-12 h-4 max-[450px]:w-10 max-[450px]:h-3"}),s.jsx("div",{className:"absolute top-2 right-2 flex flex-col space-y-2 z-10",children:s.jsx("div",{className:"p-1 sm:p-1.5 max-[450px]:p-1 rounded-full bg-gray-300 w-6 h-6 sm:w-7 sm:h-7 max-[450px]:w-5 max-[450px]:h-5"})})]}),s.jsxs("div",{className:"p-2 flex flex-col flex-grow",children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("div",{className:"h-4 bg-gray-300 rounded w-2/3"}),s.jsx("div",{className:"h-4 bg-gray-300 rounded-full w-12"})]}),s.jsx("div",{className:"h-3 bg-gray-300 rounded w-full mb-1"}),s.jsx("div",{className:"h-3 bg-gray-300 rounded w-5/6 mb-2"}),s.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"h-3 bg-gray-300 rounded w-8"}),s.jsx("div",{className:"h-5 bg-gray-300 rounded w-14"})]}),s.jsx("div",{className:"p-1 sm:p-1.5 max-[450px]:p-1 bg-gray-300 rounded-lg w-6 h-6 sm:w-7 sm:h-7 max-[450px]:w-5 max-[450px]:h-5"})]})]})]}),b=({onAddToCart:l})=>{const[i,d]=a.useState([]),[g,b]=a.useState(!0),[j,y]=a.useState(null),v=()=>{try{const e=localStorage.getItem("favorites");if(!e)return[];const s=JSON.parse(e);return Array.isArray(s)?s:[]}catch(e){return[]}},N=a.useCallback(async()=>{b(!0),y(null);try{const s=v();if(0===s.length)return d([]),void b(!1);const a=m(o(e,"products"),x(n(),"in",s)),t=(await c(a)).docs.map(e=>({id:e.id,...e.data()}));d(t)}catch(s){y("Failed to load your favorites. Please try again later.")}finally{b(!1)}},[]),w=a.useCallback(e=>{try{const s=v().filter(s=>s!==e);localStorage.setItem("favorites",JSON.stringify(s)),d(s=>s.filter(s=>s.id!==e))}catch(s){}},[]),F=a.useCallback(e=>{l&&l(e)},[l]);return a.useEffect(()=>{N()},[N]),g?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Your Favorites"}),s.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto text-sm",children:"Loading your favorite items"})]}),s.jsx("div",{className:"grid gap-3 sm:gap-4 md:gap-6 grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 bg-gray-50",children:Array.from({length:4}).map((e,a)=>s.jsx(f,{},a))})]})}):j?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center max-w-md mx-auto p-6 bg-white rounded-2xl shadow-xl",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(t,{className:"w-6 h-6 sm:w-8 sm:h-8 text-red-600"})}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-3",children:"Oops!"}),s.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:j}),s.jsx("button",{onClick:N,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})}):0===i.length?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center max-w-md mx-auto p-6 bg-white rounded-2xl shadow-xl",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(t,{className:"w-6 h-6 sm:w-8 sm:h-8 text-red-600"})}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-3",children:"No Favorites Yet"}),s.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:"You haven't added any items to your favorites yet."}),s.jsxs(h,{to:"/",className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors inline-flex items-center",children:[s.jsx(r,{className:"w-5 h-5 mr-2"}),"Start Shopping"]})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx(p,{title:"Your Favorites",count:i.length}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Browse your favorite items"})]}),s.jsx("div",{className:"grid gap-3 sm:gap-4 md:gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 bg-gray-50",children:i.map(e=>s.jsx(u,{product:e,onAddToCart:F,onRemoveFavorite:w,isFav:!0},e.id))}),s.jsx("div",{className:"mt-12 text-center",children:s.jsx(h,{to:"/Ecommerce",className:"inline-flex items-center px-6 py-3 bg-gray-100 text-gray-700 font-semibold rounded-lg hover:bg-gray-200 transition-colors",children:"Continue Shopping"})})]})})};export{b as default};
