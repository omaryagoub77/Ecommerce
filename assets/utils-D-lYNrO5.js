import{r as t}from"./vendor-d2XN-_nt.js";import{R as e}from"./ui-DPpDBAq4.js";var n,r={exports:{}};function o(){return n||(n=1,(()=>{var e={296:(t,e,n)=>{var r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,l=c||u||Function("return this")(),f=Object.prototype.toString,p=Math.max,h=Math.min,d=function(){return l.Date.now()};function v(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function y(t){if("number"==typeof t)return t;if("symbol"==typeof(e=t)||function(t){return!!t&&"object"==typeof t}(e)&&"[object Symbol]"==f.call(e))return NaN;var e;if(v(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=v(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var c=i.test(t);return c||s.test(t)?a(t.slice(2),c?2:8):o.test(t)?NaN:+t}t.exports=function(t,e,n){var r,o,i,s,a,c,u=0,l=!1,f=!1,m=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function b(e){var n=r,i=o;return r=o=void 0,u=e,s=t.apply(i,n)}function g(t){var n=t-c;return void 0===c||n>=e||n<0||f&&t-u>=i}function w(){var t,n,r=d();if(g(r))return O(r);a=setTimeout(w,(n=e-((t=r)-c),f?h(n,i-(t-u)):n))}function O(t){return a=void 0,m&&r?b(t):(r=o=void 0,s)}function _(){var t,n=d(),i=g(n);if(r=arguments,o=this,c=n,i){if(void 0===a)return u=t=c,a=setTimeout(w,e),l?b(t):s;if(f)return a=setTimeout(w,e),b(c)}return void 0===a&&(a=setTimeout(w,e)),s}return e=y(e)||0,v(n)&&(l=!!n.leading,i=(f="maxWait"in n)?p(y(n.maxWait)||0,e):i,m="trailing"in n?!!n.trailing:m),_.cancel=function(){void 0!==a&&clearTimeout(a),u=0,r=c=o=a=void 0},_.flush=function(){return void 0===a?s:O(d())},_}},96:(t,e,n)=>{var r="Expected a function",o=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,l="object"==typeof self&&self&&self.Object===Object&&self,f=u||l||Function("return this")(),p=Object.prototype.toString,h=Math.max,d=Math.min,v=function(){return f.Date.now()};function y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function m(t){if("number"==typeof t)return t;if("symbol"==typeof(e=t)||function(t){return!!t&&"object"==typeof t}(e)&&"[object Symbol]"==p.call(e))return NaN;var e;if(y(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=y(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var r=s.test(t);return r||a.test(t)?c(t.slice(2),r?2:8):i.test(t)?NaN:+t}t.exports=function(t,e,n){var o=!0,i=!0;if("function"!=typeof t)throw new TypeError(r);return y(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),function(t,e,n){var o,i,s,a,c,u,l=0,f=!1,p=!1,b=!0;if("function"!=typeof t)throw new TypeError(r);function g(e){var n=o,r=i;return o=i=void 0,l=e,a=t.apply(r,n)}function w(t){var n=t-u;return void 0===u||n>=e||n<0||p&&t-l>=s}function O(){var t,n,r=v();if(w(r))return _(r);c=setTimeout(O,(n=e-((t=r)-u),p?d(n,s-(t-l)):n))}function _(t){return c=void 0,b&&o?g(t):(o=i=void 0,a)}function P(){var t,n=v(),r=w(n);if(o=arguments,i=this,u=n,r){if(void 0===c)return l=t=u,c=setTimeout(O,e),f?g(t):a;if(p)return c=setTimeout(O,e),g(u)}return void 0===c&&(c=setTimeout(O,e)),a}return e=m(e)||0,y(n)&&(f=!!n.leading,s=(p="maxWait"in n)?h(m(n.maxWait)||0,e):s,b="trailing"in n?!!n.trailing:b),P.cancel=function(){void 0!==c&&clearTimeout(c),l=0,o=u=i=c=void 0},P.flush=function(){return void 0===c?a:_(v())},P}(t,e,{leading:o,maxWait:e,trailing:i})}},703:(t,e,n)=>{var r=n(414);function o(){}function i(){}i.resetWarningCache=o,t.exports=function(){function t(t,e,n,o,i,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},697:(t,e,n)=>{t.exports=n(703)()},414:t=>{t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},n={};function o(t){var r=n[t];if(void 0!==r)return r.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,o),i.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};(()=>{o.r(i),o.d(i,{LazyLoadComponent:()=>U,LazyLoadImage:()=>tt,trackWindowScroll:()=>D});const e=t();var n=o.n(e),r=o(697);function s(){return"undefined"!=typeof window&&"IntersectionObserver"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function u(t,e,n){return(e=l(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){var e=function(t){if("object"!==a(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===a(e)?e:String(e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){t.forEach(function(t){t.isIntersecting&&t.target.onVisible()})},d={},v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(y,t);var e,r,o,i,v=(o=y,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=p(o);if(i){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function y(t){var e,n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),(e=v.call(this,t)).supportsObserver=!t.scrollPosition&&t.useIntersectionObserver&&s(),e.supportsObserver){var r=t.threshold;e.observer=(d[n=r]=d[n]||new IntersectionObserver(h,{rootMargin:n+"px"}),d[n])}return e}return e=y,r=[{key:"componentDidMount",value:function(){this.placeholder&&this.observer&&(this.placeholder.onVisible=this.props.onVisible,this.observer.observe(this.placeholder)),this.supportsObserver||this.updateVisibility()}},{key:"componentWillUnmount",value:function(){this.observer&&this.placeholder&&this.observer.unobserve(this.placeholder)}},{key:"componentDidUpdate",value:function(){this.supportsObserver||this.updateVisibility()}},{key:"getPlaceholderBoundingBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.scrollPosition,e=this.placeholder.getBoundingClientRect(),n=this.placeholder.style,r=parseInt(n.getPropertyValue("margin-left"),10)||0,o=parseInt(n.getPropertyValue("margin-top"),10)||0;return{bottom:t.y+e.bottom+o,left:t.x+e.left+r,right:t.x+e.right+r,top:t.y+e.top+o}}},{key:"isPlaceholderInViewport",value:function(){if("undefined"==typeof window||!this.placeholder)return!1;var t=this.props,e=t.scrollPosition,n=t.threshold,r=this.getPlaceholderBoundingBox(e),o=e.y+window.innerHeight,i=e.x,s=e.x+window.innerWidth,a=e.y;return Boolean(a-n<=r.bottom&&o+n>=r.top&&i-n<=r.right&&s+n>=r.left)}},{key:"updateVisibility",value:function(){this.isPlaceholderInViewport()&&this.props.onVisible()}},{key:"render",value:function(){var t=this,e=this.props,r=e.className,o=e.height,i=e.placeholder,s=e.style,a=e.width;if(i&&"function"!=typeof i.type)return n().cloneElement(i,{ref:function(e){return t.placeholder=e}});var l=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach(function(e){u(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({display:"inline-block"},s);return void 0!==a&&(l.width=a),void 0!==o&&(l.height=o),n().createElement("span",{className:r,ref:function(e){return t.placeholder=e},style:l},i)}}],r&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),y}(n().Component);v.propTypes={onVisible:r.PropTypes.func.isRequired,className:r.PropTypes.string,height:r.PropTypes.oneOfType([r.PropTypes.number,r.PropTypes.string]),placeholder:r.PropTypes.element,threshold:r.PropTypes.number,useIntersectionObserver:r.PropTypes.bool,scrollPosition:r.PropTypes.shape({x:r.PropTypes.number.isRequired,y:r.PropTypes.number.isRequired}),width:r.PropTypes.oneOfType([r.PropTypes.number,r.PropTypes.string])},v.defaultProps={className:"",placeholder:null,threshold:100,useIntersectionObserver:!0};const y=v;var m=o(296),b=o.n(m),g=o(96),w=o.n(g),O=function(t){var e=getComputedStyle(t,null);return e.getPropertyValue("overflow")+e.getPropertyValue("overflow-y")+e.getPropertyValue("overflow-x")};const _=function(t){if(!(t instanceof HTMLElement))return window;for(var e=t;e&&e instanceof HTMLElement;){if(/(scroll|auto)/.test(O(e)))return e;e=e.parentNode}return window};function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var S=["delayMethod","delayTime"];function T(){return T=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},T.apply(this,arguments)}function j(t,e){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function E(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return x(t)}function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var I=function(){return"undefined"==typeof window?0:window.scrollX||window.pageXOffset},M=function(){return"undefined"==typeof window?0:window.scrollY||window.pageYOffset};const D=function(t){var e=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}(u,e);var r,o,i,a,c=(i=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=k(i);if(a){var n=k(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return E(this,t)});function u(t){var e;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=c.call(this,t)).useIntersectionObserver=t.useIntersectionObserver&&s(),e.useIntersectionObserver)return E(e);var r=e.onChangeScroll.bind(x(e));return"debounce"===t.delayMethod?e.delayedScroll=b()(r,t.delayTime):"throttle"===t.delayMethod&&(e.delayedScroll=w()(r,t.delayTime)),e.state={scrollPosition:{x:I(),y:M()}},e.baseComponentRef=n().createRef(),e}return r=u,(o=[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"componentDidUpdate",value:function(){"undefined"==typeof window||this.useIntersectionObserver||_(this.baseComponentRef.current)!==this.scrollElement&&(this.removeListeners(),this.addListeners())}},{key:"addListeners",value:function(){"undefined"==typeof window||this.useIntersectionObserver||(this.scrollElement=_(this.baseComponentRef.current),this.scrollElement.addEventListener("scroll",this.delayedScroll,{passive:!0}),window.addEventListener("resize",this.delayedScroll,{passive:!0}),this.scrollElement!==window&&window.addEventListener("scroll",this.delayedScroll,{passive:!0}))}},{key:"removeListeners",value:function(){"undefined"==typeof window||this.useIntersectionObserver||(this.scrollElement.removeEventListener("scroll",this.delayedScroll),window.removeEventListener("resize",this.delayedScroll),this.scrollElement!==window&&window.removeEventListener("scroll",this.delayedScroll))}},{key:"onChangeScroll",value:function(){this.useIntersectionObserver||this.setState({scrollPosition:{x:I(),y:M()}})}},{key:"render",value:function(){var e=this.props,r=(e.delayMethod,e.delayTime,function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(e,S)),o=this.useIntersectionObserver?null:this.state.scrollPosition;return n().createElement(t,T({forwardRef:this.baseComponentRef,scrollPosition:o},r))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=function(t){if("object"!==P(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===P(o)?o:String(o)),r)}var o}(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),u}(n().Component);return e.propTypes={delayMethod:r.PropTypes.oneOf(["debounce","throttle"]),delayTime:r.PropTypes.number,useIntersectionObserver:r.PropTypes.bool},e.defaultProps={delayMethod:"throttle",delayTime:300,useIntersectionObserver:!0},e};function L(t){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(a,t);var e,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=R(o);if(i){var n=R(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,t)}return e=a,(r=[{key:"render",value:function(){return n().createElement(y,this.props)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=function(t){if("object"!==L(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!==L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===L(o)?o:String(o)),r)}var o}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(n().Component);const A=D(B);function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function K(t,e){return(K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function N(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var W=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K(t,e)}(c,t);var e,r,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=z(o);if(i){var n=z(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===V(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return N(t)}(this,t)});function c(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),e=a.call(this,t);var n=t.afterLoad,r=t.beforeLoad,o=t.scrollPosition,i=t.visibleByDefault;return e.state={visible:i},i&&(r(),n()),e.onVisible=e.onVisible.bind(N(e)),e.isScrollTracked=Boolean(o&&Number.isFinite(o.x)&&o.x>=0&&Number.isFinite(o.y)&&o.y>=0),e}return e=c,(r=[{key:"componentDidUpdate",value:function(t,e){e.visible!==this.state.visible&&this.props.afterLoad()}},{key:"onVisible",value:function(){this.props.beforeLoad(),this.setState({visible:!0})}},{key:"render",value:function(){if(this.state.visible)return this.props.children;var t=this.props,e=t.className,r=t.delayMethod,o=t.delayTime,i=t.height,a=t.placeholder,c=t.scrollPosition,u=t.style,l=t.threshold,f=t.useIntersectionObserver,p=t.width;return this.isScrollTracked||f&&s()?n().createElement(y,{className:e,height:i,onVisible:this.onVisible,placeholder:a,scrollPosition:c,style:u,threshold:l,useIntersectionObserver:f,width:p}):n().createElement(A,{className:e,delayMethod:r,delayTime:o,height:i,onVisible:this.onVisible,placeholder:a,style:u,threshold:l,width:p})}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=function(t){if("object"!==V(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!==V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===V(o)?o:String(o)),r)}var o}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(n().Component);W.propTypes={afterLoad:r.PropTypes.func,beforeLoad:r.PropTypes.func,useIntersectionObserver:r.PropTypes.bool,visibleByDefault:r.PropTypes.bool},W.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},useIntersectionObserver:!0,visibleByDefault:!1};const U=W;function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Y=["afterLoad","beforeLoad","delayMethod","delayTime","effect","placeholder","placeholderSrc","scrollPosition","threshold","useIntersectionObserver","visibleByDefault","wrapperClassName","wrapperProps"];function X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?X(Object(n),!0).forEach(function(e){F(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function F(t,e,n){return(e=G(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q(){return q=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},q.apply(this,arguments)}function G(t){var e=function(t){if("object"!==H(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!==H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===H(e)?e:String(e)}function J(t,e){return(J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J(t,e)}(a,t);var e,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=Q(o);if(i){var n=Q(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===H(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=s.call(this,t)).state={loaded:!1},e}return e=a,(r=[{key:"onImageLoad",value:function(){var t=this;return this.state.loaded?null:function(e){t.props.onLoad(e),t.props.afterLoad(),t.setState({loaded:!0})}}},{key:"getImg",value:function(){var t=this.props,e=(t.afterLoad,t.beforeLoad,t.delayMethod,t.delayTime,t.effect,t.placeholder,t.placeholderSrc,t.scrollPosition,t.threshold,t.useIntersectionObserver,t.visibleByDefault,t.wrapperClassName,t.wrapperProps,function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,Y));return n().createElement("img",q({},e,{onLoad:this.onImageLoad()}))}},{key:"getLazyLoadImage",value:function(){var t=this.props,e=t.beforeLoad,r=t.className,o=t.delayMethod,i=t.delayTime,s=t.height,a=t.placeholder,c=t.scrollPosition,u=t.style,l=t.threshold,f=t.useIntersectionObserver,p=t.visibleByDefault,h=t.width;return n().createElement(U,{beforeLoad:e,className:r,delayMethod:o,delayTime:i,height:s,placeholder:a,scrollPosition:c,style:u,threshold:l,useIntersectionObserver:f,visibleByDefault:p,width:h},this.getImg())}},{key:"getWrappedLazyLoadImage",value:function(t){var e=this.props,r=e.effect,o=e.height,i=e.placeholderSrc,s=e.width,a=e.wrapperClassName,c=e.wrapperProps,u=this.state.loaded,l=u?" lazy-load-image-loaded":"",f=u||!i?{}:{backgroundImage:"url(".concat(i,")"),backgroundSize:"100% 100%"};return n().createElement("span",q({className:a+" lazy-load-image-background "+r+l,style:$($({},f),{},{color:"transparent",display:"inline-block",height:o,width:s})},c),t)}},{key:"render",value:function(){var t=this.props,e=t.effect,n=t.placeholderSrc,r=t.visibleByDefault,o=t.wrapperClassName,i=t.wrapperProps,s=this.getLazyLoadImage();return(e||n)&&!r||o||i?this.getWrappedLazyLoadImage(s):s}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G(r.key),r)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(n().Component);Z.propTypes={onLoad:r.PropTypes.func,afterLoad:r.PropTypes.func,beforeLoad:r.PropTypes.func,delayMethod:r.PropTypes.string,delayTime:r.PropTypes.number,effect:r.PropTypes.string,placeholderSrc:r.PropTypes.string,threshold:r.PropTypes.number,useIntersectionObserver:r.PropTypes.bool,visibleByDefault:r.PropTypes.bool,wrapperClassName:r.PropTypes.string,wrapperProps:r.PropTypes.object},Z.defaultProps={onLoad:function(){},afterLoad:function(){return{}},beforeLoad:function(){return{}},delayMethod:"throttle",delayTime:300,effect:"",placeholderSrc:null,threshold:100,useIntersectionObserver:!0,visibleByDefault:!1,wrapperClassName:""};const tt=Z})(),r.exports=i})()),r.exports}const i={toVector:(t,e)=>(void 0===t&&(t=e),Array.isArray(t)?t:[t,t]),add:(t,e)=>[t[0]+e[0],t[1]+e[1]],sub:(t,e)=>[t[0]-e[0],t[1]-e[1]],addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function s(t,e,n){return 0===e||Math.abs(e)===1/0?Math.pow(t,5*n):t*e*n/(e+n*t)}function a(t,e,n,r=.15){return 0===r?function(t,e,n){return Math.max(e,Math.min(t,n))}(t,e,n):t<e?-s(e-t,n-e,r)+e:t>n?+s(t-n,n-e,r)+n:t}function c(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach(function(e){c(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}const f={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function p(t){return t?t[0].toUpperCase()+t.slice(1):""}const h=["enter","leave"];const d=["gotpointercapture","lostpointercapture"];function v(t){let e=t.substring(2).toLowerCase();const n=!!~e.indexOf("passive");n&&(e=e.replace("passive",""));const r=d.includes(e)?"capturecapture":"capture",o=!!~e.indexOf(r);return o&&(e=e.replace("capture","")),{device:e,capture:o,passive:n}}function y(t){return"touches"in t}function m(t){return y(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function b(t){return y(t)?function(t){return"touchend"===t.type||"touchcancel"===t.type?t.changedTouches:t.targetTouches}(t)[0]:t}function g(t,e){try{const n=e.clientX-t.clientX,r=e.clientY-t.clientY,o=(e.clientX+t.clientX)/2,i=(e.clientY+t.clientY)/2,s=Math.hypot(n,r);return{angle:-180*Math.atan2(n,r)/Math.PI,distance:s,origin:[o,i]}}catch(n){}return null}function w(t,e){const[n,r]=Array.from(t.touches).filter(t=>e.includes(t.identifier));return g(n,r)}function O(t){const e=b(t);return y(t)?e.identifier:e.pointerId}function _(t){const e=b(t);return[e.clientX,e.clientY]}function P(t){let{deltaX:e,deltaY:n,deltaMode:r}=t;return 1===r?(e*=40,n*=40):2===r&&(e*=800,n*=800),[e,n]}function S(t,...e){return"function"==typeof t?t(...e):t}function T(){}function j(...t){return 0===t.length?T:1===t.length?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function E(t,e){return Object.assign({},e,t||{})}class x{constructor(t,e,n){this.ctrl=t,this.args=e,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:e,ingKey:n,args:r}=this;e[n]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=r,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const e=this.state,n=this.config;e._active||(this.reset(),this.computeInitial(),e._active=!0,e.target=t.target,e.currentTarget=t.currentTarget,e.lastOffset=n.from?S(n.from,e):e.offset,e.offset=e.lastOffset,e.startTime=e.timeStamp=t.timeStamp)}computeValues(t){const e=this.state;e._values=t,e.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:e,config:n,shared:r}=this;e.args=this.args;let o=0;if(t&&(e.event=t,n.preventDefault&&t.cancelable&&e.event.preventDefault(),e.type=t.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,function(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:n,altKey:r,metaKey:o,ctrlKey:i}=t;Object.assign(e,{shiftKey:n,altKey:r,metaKey:o,ctrlKey:i})}return e}(t)),r.down=r.pressed=r.buttons%2==1||r.touches>0,o=t.timeStamp-e.timeStamp,e.timeStamp=t.timeStamp,e.elapsedTime=e.timeStamp-e.startTime),e._active){const t=e._delta.map(Math.abs);i.addTo(e._distance,t)}this.axisIntent&&this.axisIntent(t);const[s,c]=e._movement,[u,l]=n.threshold,{_step:f,values:p}=e;if(n.hasCustomTransform?(!1===f[0]&&(f[0]=Math.abs(s)>=u&&p[0]),!1===f[1]&&(f[1]=Math.abs(c)>=l&&p[1])):(!1===f[0]&&(f[0]=Math.abs(s)>=u&&Math.sign(s)*u),!1===f[1]&&(f[1]=Math.abs(c)>=l&&Math.sign(c)*l)),e.intentional=!1!==f[0]||!1!==f[1],!e.intentional)return;const h=[0,0];if(n.hasCustomTransform){const[t,e]=p;h[0]=!1!==f[0]?t-f[0]:0,h[1]=!1!==f[1]?e-f[1]:0}else h[0]=!1!==f[0]?s-f[0]:0,h[1]=!1!==f[1]?c-f[1]:0;this.restrictToAxis&&!e._blocked&&this.restrictToAxis(h);const d=e.offset,v=e._active&&!e._blocked||e.active;v&&(e.first=e._active&&!e.active,e.last=!e._active&&e.active,e.active=r[this.ingKey]=e._active,t&&(e.first&&("bounds"in n&&(e._bounds=S(n.bounds,e)),this.setup&&this.setup()),e.movement=h,this.computeOffset()));const[y,m]=e.offset,[[b,g],[w,O]]=e._bounds;e.overflow=[y<b?-1:y>g?1:0,m<w?-1:m>O?1:0],e._movementBound[0]=!!e.overflow[0]&&(!1===e._movementBound[0]?e._movement[0]:e._movementBound[0]),e._movementBound[1]=!!e.overflow[1]&&(!1===e._movementBound[1]?e._movement[1]:e._movementBound[1]);const _=e._active&&n.rubberband||[0,0];if(e.offset=function(t,[e,n],[r,o]){const[[i,s],[c,u]]=t;return[a(e,i,s,r),a(n,c,u,o)]}(e._bounds,e.offset,_),e.delta=i.sub(e.offset,d),this.computeMovement(),v&&(!e.last||o>32)){e.delta=i.sub(e.offset,d);const t=e.delta.map(Math.abs);i.addTo(e.distance,t),e.direction=e.delta.map(Math.sign),e._direction=e._delta.map(Math.sign),!e.first&&o>0&&(e.velocity=[t[0]/o,t[1]/o],e.timeDelta=o)}}emit(){const t=this.state,e=this.shared,n=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!n.triggerAllEvents)return;const r=this.handler(l(l(l({},e),t),{},{[this.aliasKey]:t.values}));void 0!==r&&(t.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class k extends x{constructor(...t){super(...t),c(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=i.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=i.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const e=this.state,n=this.config;if(!e.axis&&t){const r="object"==typeof n.axisThreshold?n.axisThreshold[m(t)]:n.axisThreshold;e.axis=function([t,e],n){const r=Math.abs(t),o=Math.abs(e);return r>o&&r>n?"x":o>r&&o>n?"y":void 0}(e._movement,r)}e._blocked=(n.lockDirection||!!n.axis)&&!e.axis||!!n.axis&&n.axis!==e.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0}}}const I=t=>t,M={enabled:(t=!0)=>t,eventOptions:(t,e,n)=>l(l({},n.shared.eventOptions),t),preventDefault:(t=!1)=>t,triggerAllEvents:(t=!1)=>t,rubberband(t=0){switch(t){case!0:return[.15,.15];case!1:return[0,0];default:return i.toVector(t)}},from:t=>"function"==typeof t?t:null!=t?i.toVector(t):void 0,transform(t,e,n){const r=t||n.shared.transform;return this.hasCustomTransform=!!r,r||I},threshold:t=>i.toVector(t,0)},D=l(l({},M),{},{axis(t,e,{axis:n}){if(this.lockDirection="lock"===n,!this.lockDirection)return n},axisThreshold:(t=0)=>t,bounds(t={}){if("function"==typeof t)return e=>D.bounds(t(e));if("current"in t)return()=>t.current;if("function"==typeof HTMLElement&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:n=1/0,top:r=-1/0,bottom:o=1/0}=t;return[[e,n],[r,o]]}}),L={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]},C="undefined"!=typeof window&&window.document&&window.document.createElement;function R(){return C&&"ontouchstart"in window}const B={isBrowser:C,gesture:function(){try{return"constructor"in GestureEvent}catch(t){return!1}}(),touch:R(),touchscreen:R()||C&&window.navigator.maxTouchPoints>1,pointer:C&&"onpointerdown"in window,pointerLock:C&&"exitPointerLock"in window.document},A={mouse:0,touch:0,pen:8},V=l(l({},D),{},{device(t,e,{pointer:{touch:n=!1,lock:r=!1,mouse:o=!1}={}}){return this.pointerLock=r&&B.pointerLock,B.touch&&n?"touch":this.pointerLock?"mouse":B.pointer&&!o?"pointer":B.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:n}){if(this.preventScrollDelay="number"==typeof n?n:n||void 0===n&&t?250:void 0,B.touchscreen&&!1!==n)return t||(void 0!==n?"y":void 0)},pointerCapture(t,e,{pointer:{capture:n=!0,buttons:r=1,keys:o=!0}={}}){return this.pointerButtons=r,this.keys=o,!this.pointerLock&&"pointer"===this.device&&n},threshold(t,e,{filterTaps:n=!1,tapsThreshold:r=3,axis:o}){const s=i.toVector(t,n?r:o?1:0);return this.filterTaps=n,this.tapsThreshold=r,s},swipe({velocity:t=.5,distance:e=50,duration:n=250}={}){return{velocity:this.transform(i.toVector(t)),distance:this.transform(i.toVector(e)),duration:n}},delay(t=0){switch(t){case!0:return 180;case!1:return 0;default:return t}},axisThreshold:t=>t?l(l({},A),t):A,keyboardDisplacement:(t=10)=>t});function K(t){const[e,n]=t.overflow,[r,o]=t._delta,[i,s]=t._direction;(e<0&&r>0&&i<0||e>0&&r<0&&i>0)&&(t._movement[0]=t._movementBound[0]),(n<0&&o>0&&s<0||n>0&&o<0&&s>0)&&(t._movement[1]=t._movementBound[1])}const N=l(l({},M),{},{device(t,e,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!B.touch&&B.gesture)return"gesture";if(B.touch&&r)return"touch";if(B.touchscreen){if(B.pointer)return"pointer";if(B.touch)return"touch"}},bounds(t,e,{scaleBounds:n={},angleBounds:r={}}){const o=t=>{const e=E(S(n,t),{min:-1/0,max:1/0});return[e.min,e.max]},i=t=>{const e=E(S(r,t),{min:-1/0,max:1/0});return[e.min,e.max]};return"function"!=typeof n&&"function"!=typeof r?[o(),i()]:t=>[o(t),i(t)]},threshold(t,e,n){return this.lockDirection="lock"===n.axis,i.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey:t=>void 0===t?"ctrlKey":t,pinchOnWheel:(t=!0)=>t}),z=l(l({},D),{},{mouseOnly:(t=!0)=>t}),W=D,U=D,H=l(l({},D),{},{mouseOnly:(t=!0)=>t}),Y=new Map,X=new Map;function $(t){Y.set(t.key,t.engine),X.set(t.key,t.resolver)}const F={key:"drag",engine:class extends k{constructor(...t){super(...t),c(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const e=t._bounds.getBoundingClientRect(),n=t.currentTarget.getBoundingClientRect(),r={left:e.left-n.left+t.offset[0],right:e.right-n.right+t.offset[0],top:e.top-n.top+t.offset[1],bottom:e.bottom-n.bottom+t.offset[1]};t._bounds=D.bounds(r)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const e=this.config,n=this.state;if(null!=t.buttons&&(Array.isArray(e.pointerButtons)?!e.pointerButtons.includes(t.buttons):-1!==e.pointerButtons&&e.pointerButtons!==t.buttons))return;const r=this.ctrl.setEventIds(t);e.pointerCapture&&t.target.setPointerCapture(t.pointerId),r&&r.size>1&&n._pointerActive||(this.start(t),this.setupPointer(t),n._pointerId=O(t),n._pointerActive=!0,this.computeValues(_(t)),this.computeInitial(),e.preventScrollAxis&&"mouse"!==m(t)?(n._active=!1,this.setupScrollPrevention(t)):e.delay>0?(this.setupDelayTrigger(t),e.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const e=this.state;e._active=!0,e._preventScroll=!0,e._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const e=this.state,n=this.config;if(!e._pointerActive)return;const r=O(t);if(void 0!==e._pointerId&&r!==e._pointerId)return;const o=_(t);return document.pointerLockElement===t.target?e._delta=[t.movementX,t.movementY]:(e._delta=i.sub(o,e._values),this.computeValues(o)),i.addTo(e._movement,e._delta),this.compute(t),e._delayed&&e.intentional?(this.timeoutStore.remove("dragDelay"),e.active=!1,void this.startPointerDrag(t)):n.preventScrollAxis&&!e._preventScroll?e.axis?e.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(e._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(t)):void 0:void this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch(s){}const e=this.state,n=this.config;if(!e._active||!e._pointerActive)return;const r=O(t);if(void 0!==e._pointerId&&r!==e._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[o,i]=e._distance;if(e.tap=o<=n.tapsThreshold&&i<=n.tapsThreshold,e.tap&&n.filterTaps)e._force=!0;else{const[t,r]=e._delta,[o,i]=e._movement,[s,a]=n.swipe.velocity,[c,u]=n.swipe.distance,l=n.swipe.duration;if(e.elapsedTime<l){const n=Math.abs(t/e.timeDelta),l=Math.abs(r/e.timeDelta);n>s&&Math.abs(o)>c&&(e.swipe[0]=Math.sign(t)),l>a&&Math.abs(i)>u&&(e.swipe[1]=Math.sign(r))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const e=this.config,n=e.device;e.pointerLock&&t.currentTarget.requestPointerLock(),e.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,function(t){"persist"in t&&"function"==typeof t.persist&&t.persist()}(t);const e=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",e),this.eventStore.add(this.sharedConfig.window,"touch","cancel",e),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const e=L[t.key];if(e){const n=this.state,r=t.shiftKey?10:t.altKey?.1:1;this.start(t),n._delta=e(this.config.keyboardDisplacement,r),n._keyboardActive=!0,i.addTo(n._movement,n._delta),this.compute(t),this.emit()}}keyUp(t){t.key in L&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const e=this.config.device;t(e,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(e,"change",this.pointerMove.bind(this)),t(e,"end",this.pointerUp.bind(this)),t(e,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},resolver:V},q={key:"hover",engine:class extends k{constructor(...t){super(...t),c(this,"ingKey","hovering")}enter(t){this.config.mouseOnly&&"mouse"!==t.pointerType||(this.start(t),this.computeValues(_(t)),this.compute(t),this.emit())}leave(t){if(this.config.mouseOnly&&"mouse"!==t.pointerType)return;const e=this.state;if(!e._active)return;e._active=!1;const n=_(t);e._movement=e._delta=i.sub(n,e._values),this.computeValues(n),this.compute(t),e.delta=e.movement,this.emit()}bind(t){t("pointer","enter",this.enter.bind(this)),t("pointer","leave",this.leave.bind(this))}},resolver:H},G={key:"move",engine:class extends k{constructor(...t){super(...t),c(this,"ingKey","moving")}move(t){this.config.mouseOnly&&"mouse"!==t.pointerType||(this.state._active?this.moveChange(t):this.moveStart(t),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(t){this.start(t),this.computeValues(_(t)),this.compute(t),this.computeInitial(),this.emit()}moveChange(t){if(!this.state._active)return;const e=_(t),n=this.state;n._delta=i.sub(e,n._values),i.addTo(n._movement,n._delta),this.computeValues(e),this.compute(t),this.emit()}moveEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}bind(t){t("pointer","change",this.move.bind(this)),t("pointer","leave",this.moveEnd.bind(this))}},resolver:z},J={key:"pinch",engine:class extends x{constructor(...t){super(...t),c(this,"ingKey","pinching"),c(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){const{type:t,movement:e,lastOffset:n}=this.state;this.state.offset="wheel"===t?i.add(e,n):[(1+e[0])*n[0],e[1]+n[1]]}computeMovement(){const{offset:t,lastOffset:e}=this.state;this.state.movement=[t[0]/e[0],t[1]-e[1]]}axisIntent(){const t=this.state,[e,n]=t._movement;if(!t.axis){const r=30*Math.abs(e)-Math.abs(n);r<0?t.axis="angle":r>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&("scale"===this.state.axis?t[1]=0:"angle"===this.state.axis&&(t[0]=0))}cancel(){const t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);const e=this.state,n=this.ctrl.touchIds;if(e._active&&e._touchIds.every(t=>n.has(t)))return;if(n.size<2)return;this.start(t),e._touchIds=Array.from(n).slice(0,2);const r=w(t,e._touchIds);r&&this.pinchStart(t,r)}pointerStart(t){if(null!=t.buttons&&t.buttons%2!=1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);const e=this.state,n=e._pointerEvents,r=this.ctrl.pointerIds;if(e._active&&Array.from(n.keys()).every(t=>r.has(t)))return;if(n.size<2&&n.set(t.pointerId,t),e._pointerEvents.size<2)return;this.start(t);const o=g(...Array.from(n.values()));o&&this.pinchStart(t,o)}pinchStart(t,e){this.state.origin=e.origin,this.computeValues([e.distance,e.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;const e=w(t,this.state._touchIds);e&&this.pinchMove(t,e)}pointerMove(t){const e=this.state._pointerEvents;if(e.has(t.pointerId)&&e.set(t.pointerId,t),!this.state._active)return;const n=g(...Array.from(e.values()));n&&this.pinchMove(t,n)}pinchMove(t,e){const n=this.state,r=n._values[1],o=e.angle-r;let i=0;Math.abs(o)>270&&(i+=Math.sign(o)),this.computeValues([e.distance,e.angle-360*i]),n.origin=e.origin,n.turns=i,n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some(t=>!this.ctrl.touchIds.has(t))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){const e=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch(n){}e._pointerEvents.has(t.pointerId)&&e._pointerEvents.delete(t.pointerId),e._active&&e._pointerEvents.size<2&&(e._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();const e=this.state;e._active||(this.start(t),this.computeValues([t.scale,t.rotation]),e.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;const e=this.state;this.computeValues([t.scale,t.rotation]),e.origin=[t.clientX,t.clientY];const n=e._movement;e._movement=[t.scale-1,t.rotation],e._delta=i.sub(e._movement,n),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){const e=this.config.modifierKey;e&&!(Array.isArray(e)?e.find(e=>t[e]):t[e])||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();const e=this.state;e._delta=[-P(t)[1]/100*e.offset[0],0],i.addTo(e._movement,e._delta),K(e),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){const e=this.config.device;e&&(t(e,"start",this[e+"Start"].bind(this)),t(e,"change",this[e+"Move"].bind(this)),t(e,"end",this[e+"End"].bind(this)),t(e,"cancel",this[e+"End"].bind(this)),t("lostPointerCapture","",this[e+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}},resolver:N},Q={key:"scroll",engine:class extends k{constructor(...t){super(...t),c(this,"ingKey","scrolling")}scroll(t){this.state._active||this.start(t),this.scrollChange(t),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(t){t.cancelable&&t.preventDefault();const e=this.state,n=function(t){var e,n;const{scrollX:r,scrollY:o,scrollLeft:i,scrollTop:s}=t.currentTarget;return[null!==(e=null!=r?r:i)&&void 0!==e?e:0,null!==(n=null!=o?o:s)&&void 0!==n?n:0]}(t);e._delta=i.sub(n,e._values),i.addTo(e._movement,e._delta),this.computeValues(n),this.compute(t),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("scroll","",this.scroll.bind(this))}},resolver:W},Z={key:"wheel",engine:class extends k{constructor(...t){super(...t),c(this,"ingKey","wheeling")}wheel(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(t){const e=this.state;e._delta=P(t),i.addTo(e._movement,e._delta),K(e),this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("wheel","",this.wheel.bind(this))}},resolver:U};const tt={target(t){if(t)return()=>"current"in t?t.current:t},enabled:(t=!0)=>t,window:(t=(B.isBrowser?window:void 0))=>t,eventOptions:({passive:t=!0,capture:e=!1}={})=>({passive:t,capture:e}),transform:t=>t},et=["target","eventOptions","window","enabled","transform"];function nt(t={},e){const n={};for(const[r,o]of Object.entries(e))switch(typeof o){case"function":n[r]=o.call(n,t[r],r,t);break;case"object":n[r]=nt(t[r],o);break;case"boolean":o&&(n[r]=t[r])}return n}class rt{constructor(t,e){c(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=e}add(t,e,n,r,o){const i=this._listeners,s=function(t,e=""){const n=f[t];return t+(n&&n[e]||e)}(e,n),a=l(l({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),o);t.addEventListener(s,r,a);const c=()=>{t.removeEventListener(s,r,a),i.delete(c)};return i.add(c),c}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class ot{constructor(){c(this,"_timeouts",new Map)}add(t,e,n=140,...r){this.remove(t),this._timeouts.set(t,window.setTimeout(e,n,...r))}remove(t){const e=this._timeouts.get(t);e&&window.clearTimeout(e)}clean(){this._timeouts.forEach(t=>{window.clearTimeout(t)}),this._timeouts.clear()}}class it{constructor(t){var e,n;c(this,"gestures",new Set),c(this,"_targetEventStore",new rt(this)),c(this,"gestureEventStores",{}),c(this,"gestureTimeoutStores",{}),c(this,"handlers",{}),c(this,"config",{}),c(this,"pointerIds",new Set),c(this,"touchIds",new Set),c(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),e=this,(n=t).drag&&st(e,"drag"),n.wheel&&st(e,"wheel"),n.scroll&&st(e,"scroll"),n.move&&st(e,"move"),n.pinch&&st(e,"pinch"),n.hover&&st(e,"hover")}setEventIds(t){return y(t)?(this.touchIds=new Set(function(t){return function(t){return Array.from(t.touches).filter(e=>{var n,r;return e.target===t.currentTarget||(null===(n=t.currentTarget)||void 0===n||null===(r=n.contains)||void 0===r?void 0:r.call(n,e.target))})}(t).map(t=>t.identifier)}(t)),this.touchIds):"pointerId"in t?("pointerup"===t.type||"pointercancel"===t.type?this.pointerIds.delete(t.pointerId):"pointerdown"===t.type&&this.pointerIds.add(t.pointerId),this.pointerIds):void 0}applyHandlers(t,e){this.handlers=t,this.nativeHandlers=e}applyConfig(t,e){this.config=function(t,e,n={}){const r=t,{target:o,eventOptions:i,window:s,enabled:a,transform:c}=r,u=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(r,et);if(n.shared=nt({target:o,eventOptions:i,window:s,enabled:a,transform:c},tt),e){const t=X.get(e);n[e]=nt(l({shared:n.shared},u),t)}else for(const f in u){const t=X.get(f);t&&(n[f]=nt(l({shared:n.shared},u[f]),t))}return n}(t,e,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const e=this.config.shared,n={};let r;if(!e.target||(r=e.target(),r)){if(e.enabled){for(const e of this.gestures){const o=this.config[e],i=at(n,o.eventOptions,!!r);o.enabled&&new(Y.get(e))(this,t,e).bind(i)}const o=at(n,e.eventOptions,!!r);for(const e in this.nativeHandlers)o(e,"",n=>this.nativeHandlers[e](l(l({},this.state.shared),{},{event:n,args:t})),void 0,!0)}for(const t in n)n[t]=j(...n[t]);if(!r)return n;for(const t in n){const{device:e,capture:o,passive:i}=v(t);this._targetEventStore.add(r,e,"",n[t],{capture:o,passive:i})}}}}function st(t,e){t.gestures.add(e),t.gestureEventStores[e]=new rt(t,e),t.gestureTimeoutStores[e]=new ot}const at=(t,e,n)=>(r,o,i,s={},a=!1)=>{var c,u;const l=null!==(c=s.capture)&&void 0!==c?c:e.capture,d=null!==(u=s.passive)&&void 0!==u?u:e.passive;let v=a?r:function(t,e="",n=!1){const r=f[t],o=r&&r[e]||e;return"on"+p(t)+p(o)+(function(t=!1,e){return t&&!h.includes(e)}(n,o)?"Capture":"")}(r,o,l);n&&d&&(v+="Passive"),t[v]=t[v]||[],t[v].push(i)},ct=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function ut(t,e,n,r,o,i){if(!t.has(n))return;if(!Y.has(r))return;const s=n+"Start",a=n+"End";o[r]=t=>{let r;return t.first&&s in e&&e[s](t),n in e&&(r=e[n](t)),t.last&&a in e&&e[a](t),r},i[r]=i[r]||{}}function lt(t){return t.forEach($),function(t,n){const{handlers:r,nativeHandlers:o,config:i}=function(t,e){const[n,r,o]=function(t){const e={},n={},r=new Set;for(let o in t)ct.test(o)?(r.add(RegExp.lastMatch),n[o]=t[o]):e[o]=t[o];return[n,e,r]}(t),i={};return ut(o,n,"onDrag","drag",i,e),ut(o,n,"onWheel","wheel",i,e),ut(o,n,"onScroll","scroll",i,e),ut(o,n,"onPinch","pinch",i,e),ut(o,n,"onMove","move",i,e),ut(o,n,"onHover","hover",i,e),{handlers:i,config:e,nativeHandlers:r}}(t,n||{});return function(t,n={},r,o){const i=e.useMemo(()=>new it(t),[]);if(i.applyHandlers(t,o),i.applyConfig(n,r),e.useEffect(i.effect.bind(i)),e.useEffect(()=>i.clean.bind(i),[]),void 0===n.target)return i.bind.bind(i)}(r,i,void 0,o)}}function ft(t,e){return lt([F,J,Q,Z,G,q])(t,e||{})}export{o as r,ft as u};
