const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./HeroSlider-DPyqR50U.js","./index-DCNRoESp.js","./ui-JvLBDIZS.js","./vendor-d2XN-_nt.js","./firebase-BxPAW4b_.js","./router-z7kgPuEy.js","./index-BXX9S-o1.css","./utils-DPtd6p0S.js","./HeroSlider-D93dPRfE.css"])))=>i.map(i=>d[i]);
import{j as e,d as t,_ as s}from"./index-DCNRoESp.js";import{R as a,r}from"./ui-JvLBDIZS.js";import{r as l}from"./utils-DPtd6p0S.js";import{f as o,q as i,w as n,h as d,l as c,j as m}from"./firebase-BxPAW4b_.js";import{L as h}from"./router-z7kgPuEy.js";import"./vendor-d2XN-_nt.js";var u=l();const x=(e,t=80)=>e&&e.includes("firebasestorage.googleapis.com")?`${e}?alt=media&q=${t}`:e,p=r.lazy(()=>s(()=>import("./HeroSlider-DPyqR50U.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),g=r.lazy(()=>s(()=>import("./ui-JvLBDIZS.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.ShoppingCart}))),f=r.lazy(()=>s(()=>import("./ui-JvLBDIZS.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.WifiOff}))),y=r.lazy(()=>s(()=>import("./ui-JvLBDIZS.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.Heart}))),b=r.lazy(()=>s(()=>import("./ui-JvLBDIZS.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.Search}))),j=r.lazy(()=>s(()=>import("./ui-JvLBDIZS.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.X}))),w=r.lazy(()=>s(()=>import("./ui-JvLBDIZS.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.Grid}))),v=r.lazy(()=>s(()=>import("./ui-JvLBDIZS.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.List}))),N=r.lazy(()=>s(()=>import("./ui-JvLBDIZS.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.ChevronLeft}))),_=r.lazy(()=>s(()=>import("./ui-JvLBDIZS.js").then(e=>e.m),__vite__mapDeps([2,3]),import.meta.url).then(e=>({default:e.ChevronRight})));class A extends a.Component{state={hasError:!1};static getDerivedStateFromError(e){return{hasError:!0}}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center p-6 bg-white rounded-2xl shadow-xl max-w-md mx-auto",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(f,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-xl font-bold text-red-600 mb-3",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We're experiencing technical difficulties. Please try again later."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Refresh Page"})]})}):this.props.children}}const E={products:[],loading:!1,searchQuery:"",favoriteState:[],lastVisible:null,hasMore:!0,page:1,viewMode:"grid",showAllMen:!1,showAllWomen:!1,showAllKids:!1};function S(e,t){switch(t.type){case"SET_PRODUCTS":return{...e,products:t.payload};case"SET_LOADING":return{...e,loading:t.payload};case"SET_SEARCH_QUERY":return{...e,searchQuery:t.payload};case"SET_FAVORITE_STATE":return{...e,favoriteState:Array.isArray(t.payload)?t.payload:[]};case"SET_LAST_VISIBLE":return{...e,lastVisible:t.payload};case"SET_HAS_MORE":return{...e,hasMore:t.payload};case"SET_PAGE":return{...e,page:t.payload};case"SET_VIEW_MODE":return{...e,viewMode:t.payload};case"RESET_PAGINATION":return{...e,page:1,lastVisible:null,hasMore:!0,products:[]};case"TOGGLE_SHOW_ALL_MEN":return{...e,showAllMen:!e.showAllMen};case"TOGGLE_SHOW_ALL_WOMEN":return{...e,showAllWomen:!e.showAllWomen};case"TOGGLE_SHOW_ALL_KIDS":return{...e,showAllKids:!e.showAllKids};case"RESET_SHOW_ALL":return{...e,showAllMen:!1,showAllWomen:!1,showAllKids:!1};default:return e}}const T=a.memo(({product:t,onAddToCart:s,onAddToFavorites:a,isFav:l})=>{const[o,i]=r.useState(!1),[n,d]=r.useState(!1),c=parseFloat(t.price),m=parseFloat(t.newPrice),p=c>m?Math.round((c-m)/c*100):0,f=t.images&&t.images.length>0?t.images[0]:null;return e.jsxs("div",{className:"group bg-white rounded-xl shadow-sm overflow-hidden transition-shadow duration-300 hover:shadow-xl border border-gray-100 flex  flex-col h-[90%]",children:[e.jsxs("div",{className:"relative  overflow-hidden bg-gray-50 aspect-square",children:[e.jsx(h,{to:`/product/${t.id}`,"aria-label":`View details for ${t.name}`,children:f?e.jsx(u.LazyLoadImage,{src:x(f,75),alt:t.name,effect:"",className:"w-full h-full object-cover transition-all duration-300 group-hover:scale-110 "+(o?"opacity-100":"opacity-0"),onLoad:()=>i(!0),onError:()=>d(!0),placeholderSrc:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjRkNGQ0ZDIi8+Cjwvc3ZnPgo="}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:e.jsx("span",{className:"text-gray-400 text-sm",children:"No Image"})})}),p>0&&e.jsxs("div",{className:"absolute top-3 left-3 bg-red-600 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg",children:[p,"% OFF"]}),e.jsx("button",{onClick:()=>a(t.id),"aria-label":l?"Remove from favorites":"Add to favorites",className:"absolute top-3 right-3 p-2 rounded-full backdrop-blur-sm transition-all duration-300 shadow-lg "+(l?"bg-red-600 text-white":"bg-white/90 text-gray-600 hover:bg-red-50 hover:text-red-600"),children:e.jsx(y,{className:"w-4 h-4 transition-all duration-200 "+(l?"fill-current":"")})}),!o&&!n&&f&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 animate-pulse",children:e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full"})})]}),e.jsxs("div",{className:"p-3 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-semibold text-gray-900 line mb-2 text-sm sm:text-base min-h-[2.5rem]",children:t.name}),e.jsxs("div",{className:"flex items-center justify-between mt-auto pt-3 border-t border-gray-100",children:[e.jsxs("div",{className:"flex flex-col",children:[c>m&&e.jsxs("span",{className:"line-through text-xs text-gray-400",children:["$",c.toFixed(2)]}),e.jsxs("span",{className:"text-lg font-bold text-red-600",children:["$",m.toFixed(2)]})]}),e.jsxs("button",{onClick:()=>s(t),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all shadow-md hover:shadow-lg text-sm font-medium flex items-center space-x-1","aria-label":`Add ${t.name} to cart`,children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Add"})]})]})]})]})},(e,t)=>e.product.id===t.product.id&&e.isFav===t.isFav),C=()=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden animate-pulse border border-gray-100",children:[e.jsx("div",{className:"aspect-square bg-gray-200"}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-20"}),e.jsx("div",{className:"h-9 bg-gray-200 rounded w-16"})]})]})]}),L=a.memo(({title:t,count:s,products:a,onAddToCart:l,onAddToFavorites:o,isFav:i,categoryRoute:n,loading:d=!1})=>{const c=r.useRef(null),m=e=>{if(c.current){const t=.8*c.current.offsetWidth;c.current.scrollBy({left:"left"===e?-t:t,behavior:"smooth"})}};return e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:t}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"bg-red-100 text-red-800 text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",children:[s," ",1===s?"item":"items"]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>m("left"),className:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors","aria-label":"Scroll left",children:e.jsx(N,{className:"w-4 h-4 text-gray-700"})}),e.jsx("button",{onClick:()=>m("right"),className:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors","aria-label":"Scroll right",children:e.jsx(_,{className:"w-4 h-4 text-gray-700"})})]})]})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{ref:c,className:"flex overflow-x-auto overflow-y-hidden gap-4 sm:gap-6 pb-1 scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:d?Array.from({length:5}).map((t,s)=>e.jsx(C,{},s)):a.map(t=>e.jsx("div",{className:"flex-shrink-0 w-40 sm:w-48 md:w-56",children:e.jsx(T,{product:t,onAddToCart:l,onAddToFavorites:o,isFav:i(t.id)})},t.id))})}),e.jsx("div",{className:"flex justify-end ",children:e.jsxs(h,{to:n,className:"px-6 py-3   text-red-500 rounded-lg hover:drop-shadow-2xl hover:text-red-600 transition-all font-semibold inline-flex items-center space-x-2",children:[e.jsxs("span",{children:["View All ",t]}),e.jsx(_,{className:"w-5 h-5"})]})})]})}),I=a.memo(({searchQuery:t,setSearchQuery:s,filteredCount:a})=>{const l=r.useCallback((()=>{let e;return function(...t){clearTimeout(e),e=setTimeout(()=>{clearTimeout(e),(e=>{s(e)})(...t)},300)}})(),[s]);return e.jsx("div",{className:"w-full mb-8 mx-auto px-4",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(b,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search for products, brands and more...",defaultValue:t,onChange:e=>l(e.target.value),className:"w-full pl-12 pr-12 py-4 border-2 border-gray-200 rounded-xl bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-red-600 transition-all duration-300 text-sm","aria-label":"Search products"}),t&&e.jsx("button",{onClick:()=>s(""),className:"absolute inset-y-0 right-0 pr-4 flex items-center","aria-label":"Clear search",children:e.jsx(j,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),""!==t.trim()&&e.jsx("div",{className:"mt-3 text-center",children:e.jsxs("p",{className:"text-gray-700 text-sm",children:["Showing ",e.jsx("span",{className:"font-bold text-red-600",children:a})," result",1!==a?"s":""," for ",e.jsxs("span",{className:"font-semibold",children:['"',t,'"']})]})})]})})}),O=a.memo(()=>{const[s,a]=r.useState([]),[l,i]=r.useState(!0);return r.useEffect(()=>{(async()=>{try{const e=await(async()=>{try{const e=o(t,"categories");return(await m(e)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw e}})();a(e)}catch(e){}finally{i(!1)}})()},[]),l?e.jsx("div",{className:"flex justify-center items-center py-10",children:e.jsx("div",{className:"animate-spin h-16 w-16 border-4 border-red-600 border-t-transparent rounded-full"})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-1",children:"Shop From Top Categories"}),e.jsx("p",{className:"text-gray-600 text-sm max-w-2xl mx-auto",children:"Browse our collections and find the perfect items for you"})]}),e.jsx("div",{className:"flex justify-center overflow-x-auto gap-6 sm:gap-8 pb-4 scrollbar-hide",children:s.map(t=>e.jsxs("div",{className:"flex flex-col items-center group cursor-pointer flex-shrink-0",children:[e.jsxs("div",{className:"relative w-20 h-20 sm:w-24 sm:h-24 rounded-full overflow-hidden transition-all duration-300 group-hover:shadow-xl group-hover:scale-105 border-4 border-white shadow-lg bg-gradient-to-br from-gray-100 to-gray-200",children:[t.imageUrl?e.jsx(u.LazyLoadImage,{src:t.imageUrl,alt:t.name,effect:"blur",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-100 to-purple-100",children:e.jsx("span",{className:"text-3xl",children:t.name.charAt(0)})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsx("span",{className:"mt-3 text-xs sm:text-sm font-medium text-gray-700 capitalize group-hover:text-red-600 transition-colors text-center",children:t.name})]},t.id))})]})}),R=a.memo(({onAddToCart:s,onAddToFavorites:a,favorites:l=[]})=>{const[h,u]=r.useReducer(S,E),{products:x,loading:g,searchQuery:y,favoriteState:b,lastVisible:j,hasMore:N,page:_,viewMode:T,showAllMen:C,showAllWomen:R,showAllKids:M}=h,V=r.useRef(b);r.useEffect(()=>{V.current=b},[b]),r.useEffect(()=>{const e=(()=>{try{const e=localStorage.getItem("favorites");if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return[]}})();u({type:"SET_FAVORITE_STATE",payload:e})},[]);const P=r.useCallback(async(e=1,s=y)=>{1===e&&(u({type:"SET_LOADING",payload:!0}),u({type:"RESET_PAGINATION"}));try{const s={pageSize:100,lastVisible:e>1?j:null};let a;a=await new Promise(e=>{const a=async()=>{const a=await(async(e={})=>{try{let s=o(t,"products");e.category&&(s=i(s,n("category","==",e.category))),e.searchQuery&&(s=i(s,n("name",">=",e.searchQuery),n("name","<=",e.searchQuery+"\\uf8ff"))),s=e.lastVisible?i(s,d(e.lastVisible),c(e.pageSize||100)):i(s,c(e.pageSize||100));const a=await m(s);return{products:a.docs.map(e=>({id:e.id,...e.data()})),lastVisible:a.docs[a.docs.length-1],hasMore:a.docs.length===(e.pageSize||100)}}catch(s){throw s}})(s);e(a)};window.requestIdleCallback?window.requestIdleCallback(a,{timeout:1e3}):setTimeout(a,0)}),u(1===e?{type:"SET_PRODUCTS",payload:a.products}:{type:"SET_PRODUCTS",payload:[...x,...a.products]}),u({type:"SET_LAST_VISIBLE",payload:a.lastVisible}),u({type:"SET_HAS_MORE",payload:a.hasMore}),u({type:"SET_PAGE",payload:e})}catch(a){}finally{u({type:"SET_LOADING",payload:!1})}},[j,x]);r.useEffect(()=>{P()},[]),r.useEffect(()=>{""!==y.trim()&&u({type:"RESET_SHOW_ALL"})},[y]);const k=r.useCallback(e=>{const t=Array.isArray(V.current)?[...V.current]:"object"==typeof V.current&&null!==V.current?Object.values(V.current):[];let s;if(s=t.includes(e)?t.filter(t=>t!==e):[...t,e],(e=>{try{const t=Array.isArray(e)?e:[];localStorage.setItem("favorites",JSON.stringify(t))}catch(t){}})(s),u({type:"SET_FAVORITE_STATE",payload:s}),a){const t=x.find(t=>t.id===e);t&&a(t)}},[a,x]),D=Array.isArray(b)?b:"object"==typeof b&&null!==b?Object.values(b):[],F=r.useCallback(e=>D.includes(e),[D]),W=x.filter(e=>"men"===e.category),z=x.filter(e=>"women"===e.category),G=x.filter(e=>"kids"===e.category),H=""!==y.trim()?W.filter(e=>e.name.toLowerCase().includes(y.toLowerCase())):W,Q=""!==y.trim()?z.filter(e=>e.name.toLowerCase().includes(y.toLowerCase())):z,Z=""!==y.trim()?G.filter(e=>e.name.toLowerCase().includes(y.toLowerCase())):G,B=(y.trim(),H),U=(y.trim(),Q),K=(y.trim(),Z),$=H.length+Q.length+Z.length;return g&&0===x.length?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin h-16 w-16 border-4 border-red-600 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 font-medium",children:"Loading products..."})]})}):0===x.length?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-6 bg-white rounded-2xl shadow-xl",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(f,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-3",children:"No Products Available"}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:"We couldn't find any products at the moment. Please check back later."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Refresh Page"})]})}):e.jsx(A,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"h-64 bg-gray-200 animate-pulse"}),children:e.jsx(p,{})}),e.jsx(O,{}),e.jsx("div",{className:"  py-1",children:e.jsx(I,{searchQuery:y,setSearchQuery:e=>u({type:"SET_SEARCH_QUERY",payload:e}),filteredCount:$})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 mb-4 hidden",children:e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:[e.jsx("button",{type:"button",onClick:()=>u({type:"SET_VIEW_MODE",payload:"grid"}),className:"px-3 py-2 text-sm font-medium rounded-l-lg "+("grid"===T?"bg-red-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"),children:e.jsx(w,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),e.jsx("button",{type:"button",onClick:()=>u({type:"SET_VIEW_MODE",payload:"list"}),className:"px-3 py-2 text-sm font-medium rounded-r-md "+("list"===T?"bg-red-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"),children:e.jsx(v,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[H.length>0&&e.jsx("div",{id:"men-section",children:e.jsx(L,{title:"Men's Collection",count:H.length,products:B,onAddToCart:s,onAddToFavorites:k,isFav:F,categoryRoute:"/men",loading:g&&0===x.length})}),Q.length>0&&e.jsx("div",{id:"women-section",children:e.jsx(L,{title:"Women's Collection",count:Q.length,products:U,onAddToCart:s,onAddToFavorites:k,isFav:F,categoryRoute:"/women",loading:g&&0===x.length})}),Z.length>0&&e.jsx("div",{id:"kids-section",children:e.jsx(L,{title:"Kids' Collection",count:Z.length,products:K,onAddToCart:s,onAddToFavorites:k,isFav:F,categoryRoute:"/kids",loading:g&&0===x.length})})]}),N&&e.jsx("div",{className:"flex justify-center my-8",children:e.jsx("button",{onClick:()=>P(_+1),disabled:g,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all duration-300 shadow-md hover:shadow-lg flex items-center disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:g?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):"Load More Products"})})]})})});export{R as default};
